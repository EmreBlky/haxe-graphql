(function(e,t){"use strict";e["graphql"]=e["graphql"]||{};var r=function(){return U.__string_rec(this,"")};function n(e,t){function r(){}r.prototype=e;var n=new r;for(var i in t)n[i]=t[i];if(t.toString!==Object.prototype.toString)n.toString=t.toString;return n}var i=e["Demo"]=function(){};i.__name__=true;i.main=function(){};i.parse=function(e){var t=new S(e,{noLocation:true});return t.document};i.hxgen=function(e){return c.parse(e)};var a=function(){};a.__name__=true;a.cca=function(e,t){var r=e.charCodeAt(t);if(r!=r){return undefined}return r};a.substr=function(e,t,r){if(r==null){r=e.length}else if(r<0){if(t==0){r=e.length+r}else{return""}}return e.substr(t,r)};a.remove=function(e,t){var r=e.indexOf(t);if(r==-1){return false}e.splice(r,1);return true};a.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var s=function(){};s.__name__=true;s.exists=function(e,t){var r=L(e)();while(r.hasNext()){var n=r.next();if(t(n)){return true}}return false};s.find=function(e,t){var r=L(e)();while(r.hasNext()){var n=r.next();if(t(n)){return n}}return null};Math.__name__=true;var o=function(){};o.__name__=true;o.field=function(e,t){try{return e[t]}catch(r){return null}};var u=function(){};u.__name__=true;u.string=function(e){return U.__string_rec(e,"")};var l=function(){};l.__name__=true;l.endsWith=function(e,t){var r=t.length;var n=e.length;if(n>=r){return a.substr(e,n-r,r)==t}else{return false}};l.replace=function(e,t,r){return e.split(t).join(r)};var p=function(e,t){if(t==null){t=false}if(e==null){e="	"}this.tabs="";this.fieldDelimiter=t?",":";";this.shortTypedefs=t;this.tabString=e};p.__name__=true;p.prototype={printUnop:function(e){switch(e[1]){case 0:return"++";case 1:return"--";case 2:return"!";case 3:return"-";case 4:return"~"}},printBinop:function(e){switch(e[1]){case 0:return"+";case 1:return"*";case 2:return"/";case 3:return"-";case 4:return"=";case 5:return"==";case 6:return"!=";case 7:return">";case 8:return">=";case 9:return"<";case 10:return"<=";case 11:return"&";case 12:return"|";case 13:return"^";case 14:return"&&";case 15:return"||";case 16:return"<<";case 17:return">>";case 18:return">>>";case 19:return"%";case 20:var t=e[2];return this.printBinop(t)+"=";case 21:return"...";case 22:return"=>"}},escapeString:function(e,t){return t+l.replace(l.replace(l.replace(l.replace(e,"\n","\\n"),"	","\\t"),"'","\\'"),'"','\\"')+t},printString:function(e){return this.escapeString(e,'"')},printConstant:function(e){switch(e[1]){case 0:var t=e[2];return t;case 1:var r=e[2];return r;case 2:var n=e[2];return this.printString(n);case 3:var i=e[2];return i;case 4:var a=e[3];var s=e[2];return"~/"+s+"/"+a}},printTypeParam:function(e){switch(e[1]){case 0:var t=e[2];return this.printComplexType(t);case 1:var r=e[2];return this.printExpr(r)}},printTypePath:function(e){return(e.pack.length>0?e.pack.join(".")+".":"")+e.name+(e.sub!=null?"."+e.sub:"")+(e.params==null?"":e.params.length>0?"<"+e.params.map(B(this,this.printTypeParam)).join(", ")+">":"")},printComplexType:function(e){var t=this;switch(e[1]){case 0:var r=e[2];return this.printTypePath(r);case 1:var n=e[3];var i=e[2];var a=function(e){if(e[1]==1){return"("+t.printComplexType(e)+")"}else{return t.printComplexType(e)}};return(i.length>0?i.map(a).join(" -> "):"Void")+" -> "+this.printComplexType(n);case 2:var s=e[2];var o=[];var u=0;while(u<s.length){var l=s[u];++u;o.push(this.printField(l)+this.fieldDelimiter+" ")}return"{ "+o.join("")+"}";case 3:var p=e[2];return"("+this.printComplexType(p)+")";case 4:var c=e[3];var h=e[2];return"{> "+h.map(B(this,this.printTypePath)).join(" >, ")+", "+c.map(B(this,this.printField)).join(", ")+" }";case 5:var _=e[2];return"?"+this.printComplexType(_)}},printMetadata:function(e){return"@"+e.name+(e.params!=null&&e.params.length>0?"("+this.printExprs(e.params,", ")+")":"")},printAccess:function(e){switch(e[1]){case 0:return"public";case 1:return"private";case 2:return"static";case 3:return"override";case 4:return"dynamic";case 5:return"inline";case 6:return"macro"}},printField:function(e){var t;if(this.shortTypedefs){var r=e.kind;if(r[1]==0){t=true}else{t=false}}else{t=false}var n=e.meta!=null&&e.meta.length>0&&s.exists(e.meta,function(e){return e.name==":optional"});var i=e.meta.filter(function(e){if(t){return e.name!=":optional"}else{return false}});var a=(e.doc!=null&&e.doc!=""?"/**\n"+this.tabs+this.tabString+l.replace(e.doc,"\n","\n"+this.tabs+this.tabString)+"\n"+this.tabs+"**/\n"+this.tabs:"")+(i!=null&&i.length>0?i.map(B(this,this.printMetadata)).join("\n"+this.tabs)+("\n"+this.tabs):"")+(e.access!=null&&e.access.length>0?e.access.map(B(this,this.printAccess)).join(" ")+" ":"");var o=e.kind;var u;switch(o[1]){case 0:var p=o[3];var c=o[2];if(this.shortTypedefs){u=""+(n?"?":"")+e.name+this.opt(c,B(this,this.printComplexType)," : ")+this.opt(p,B(this,this.printExpr)," = ")}else{u="var "+e.name+this.opt(c,B(this,this.printComplexType)," : ")+this.opt(p,B(this,this.printExpr)," = ")}break;case 1:var h=o[2];u="function "+e.name+this.printFunction(h);break;case 2:var _=o[5];var f=o[4];var v=o[3];var d=o[2];u="var "+e.name+"("+d+", "+v+")"+this.opt(f,B(this,this.printComplexType)," : ")+this.opt(_,B(this,this.printExpr)," = ");break}return a+u},printTypeParamDecl:function(e){return e.name+(e.params!=null&&e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+(e.constraints!=null&&e.constraints.length>0?":("+e.constraints.map(B(this,this.printComplexType)).join(", ")+")":"")},printFunctionArg:function(e){return(e.opt?"?":"")+e.name+this.opt(e.type,B(this,this.printComplexType),":")+this.opt(e.value,B(this,this.printExpr)," = ")},printFunction:function(e){return(e.params==null?"":e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+"("+e.args.map(B(this,this.printFunctionArg)).join(", ")+")"+this.opt(e.ret,B(this,this.printComplexType),":")+this.opt(e.expr,B(this,this.printExpr)," ")},printVar:function(e){return e.name+this.opt(e.type,B(this,this.printComplexType),":")+this.opt(e.expr,B(this,this.printExpr)," = ")},printExpr:function(e){var t=this;if(e==null){return"#NULL"}else{var r=e.expr;switch(r[1]){case 0:var n=r[2];return this.printConstant(n);case 1:var i=r[3];var a=r[2];return""+this.printExpr(a)+"["+this.printExpr(i)+"]";case 2:var s=r[4];var o=r[3];var u=r[2];return""+this.printExpr(o)+" "+this.printBinop(u)+" "+this.printExpr(s);case 3:var l=r[3];var p=r[2];return""+this.printExpr(p)+"."+l;case 4:var c=r[2];return"("+this.printExpr(c)+")";case 5:var h=r[2];return"{ "+h.map(function(e){return""+e.field+" : "+t.printExpr(e.expr)}).join(", ")+" }";case 6:var _=r[2];return"["+this.printExprs(_,", ")+"]";case 7:var f=r[3];var v=r[2];return""+this.printExpr(v)+"("+this.printExprs(f,", ")+")";case 8:var d=r[3];var m=r[2];return"new "+this.printTypePath(m)+"("+this.printExprs(d,", ")+")";case 9:switch(r[3]){case false:var g=r[4];var y=r[2];return this.printUnop(y)+this.printExpr(g);case true:var E=r[4];var k=r[2];return this.printExpr(E)+this.printUnop(k)}break;case 10:var S=r[2];return"var "+S.map(B(this,this.printVar)).join(", ");case 11:var T=r[3];var b=r[2];if(b!=null){return"function "+b+this.printFunction(T)}else{var x=r[3];return"function"+this.printFunction(x)}break;case 12:if(r[2].length==0){return"{ }"}else{var w=r[2];var O=this.tabs;this.tabs+=this.tabString;var D="{\n"+this.tabs+this.printExprs(w,";\n"+this.tabs);this.tabs=O;return D+(";\n"+this.tabs+"}")}break;case 13:var N=r[3];var A=r[2];return"for ("+this.printExpr(A)+") "+this.printExpr(N);case 14:var C=r[3];var I=r[2];return""+this.printExpr(I)+" in "+this.printExpr(C);case 15:if(r[4]==null){var F=r[2];var R=r[3];return"if ("+this.printExpr(F)+") "+this.printExpr(R)}else{var P=r[2];var j=r[3];var U=r[4];return"if ("+this.printExpr(P)+") "+this.printExpr(j)+" else "+this.printExpr(U)}break;case 16:switch(r[4]){case false:var L=r[2];var V=r[3];return"do "+this.printExpr(V)+" while ("+this.printExpr(L)+")";case true:var M=r[2];var q=r[3];return"while ("+this.printExpr(M)+") "+this.printExpr(q)}break;case 17:var G=r[4];var K=r[3];var X=r[2];var W=this.tabs;this.tabs+=this.tabString;var H="switch "+this.printExpr(X)+" {\n"+this.tabs+K.map(function(e){return"case "+t.printExprs(e.values,", ")+(e.guard!=null?" if ("+t.printExpr(e.guard)+"):":":")+(e.expr!=null?t.opt(e.expr,B(t,t.printExpr))+";":"")}).join("\n"+this.tabs);if(G!=null){H+="\n"+this.tabs+"default:"+(G.expr==null?"":this.printExpr(G)+";")}this.tabs=W;return H+("\n"+this.tabs+"}");case 18:var J=r[3];var Q=r[2];return"try "+this.printExpr(Q)+J.map(function(e){return" catch("+e.name+":"+t.printComplexType(e.type)+") "+t.printExpr(e.expr)}).join("");case 19:var Y=r[2];return"return"+this.opt(Y,B(this,this.printExpr)," ");case 20:return"break";case 21:return"continue";case 22:var $=r[2];return"untyped "+this.printExpr($);case 23:var z=r[2];return"throw "+this.printExpr(z);case 24:var Z=r[3];var ee=r[2];if(Z!=null){return"cast("+this.printExpr(ee)+", "+this.printComplexType(Z)+")"}else{var te=r[2];return"cast "+this.printExpr(te)}break;case 25:var re=r[2];return"#DISPLAY("+this.printExpr(re)+")";case 26:var ne=r[2];return"#DISPLAY("+this.printTypePath(ne)+")";case 27:var ie=r[4];var ae=r[3];var se=r[2];return""+this.printExpr(se)+" ? "+this.printExpr(ae)+" : "+this.printExpr(ie);case 28:var oe=r[3];var ue=r[2];return"("+this.printExpr(ue)+" : "+this.printComplexType(oe)+")";case 29:var le=r[3];var pe=r[2];return this.printMetadata(pe)+" "+this.printExpr(le)}}},printExprs:function(e,t){return e.map(B(this,this.printExpr)).join(t)},printExtension:function(e,t){return"{\n"+this.tabs+">"+e.map(B(this,this.printTypePath)).join(",\n"+this.tabs+">")+","+(t.length>0?"\n"+this.tabs+t.map(B(this,this.printField)).join(";\n"+this.tabs)+";\n}":"\n}")},printStructure:function(e){if(e.length==0){return"{ }"}else{return"{\n"+this.tabs+e.map(B(this,this.printField)).join(this.fieldDelimiter+("\n"+this.tabs))+";\n}"}},printTypeDefinition:function(e,t){if(t==null){t=true}var r=this.tabs;this.tabs=this.tabString;var n;if(e==null){n="#NULL"}else{var i=(t&&e.pack.length>0&&e.pack[0]!=""?"package "+e.pack.join(".")+";\n":"")+(e.meta!=null&&e.meta.length>0?e.meta.map(B(this,this.printMetadata)).join(" ")+" ":"")+(e.isExtern?"extern ":"");var a=e.kind;var s;switch(a[1]){case 0:var o="enum "+e.name+(e.params!=null&&e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+" {\n";var u=[];var p=0;var c=e.fields;while(p<c.length){var h=c[p];++p;var _=this.tabs+(h.doc!=null&&h.doc!=""?"/**\n"+this.tabs+this.tabString+l.replace(h.doc,"\n","\n"+this.tabs+this.tabString)+"\n"+this.tabs+"**/\n"+this.tabs:"")+(h.meta!=null&&h.meta.length>0?h.meta.map(B(this,this.printMetadata)).join(" ")+" ":"");var f=h.kind;var v;switch(f[1]){case 0:var d=f[2];v=h.name+this.opt(d,B(this,this.printComplexType),":");break;case 1:var m=f[2];v=h.name+this.printFunction(m);break;case 2:throw new j("FProp is invalid for TDEnum.");break}u.push(_+v+";")}s=o+u.join("\n")+"\n}";break;case 1:var g="typedef "+e.name+(e.params!=null&&e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+" = {\n";var y=[];var E=0;var k=e.fields;while(E<k.length){var S=k[E];++E;y.push(this.tabs+this.printField(S)+this.fieldDelimiter)}s=g+y.join("\n")+"\n}";break;case 2:var T=a[4];var b=a[3];var x=a[2];var w=(T?"interface ":"class ")+e.name+(e.params!=null&&e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+(x!=null?" extends "+this.printTypePath(x):"");var O;if(b!=null){var D;if(T){var N=[];var A=0;while(A<b.length){var C=b[A];++A;N.push(" extends "+this.printTypePath(C))}D=N}else{var I=[];var F=0;while(F<b.length){var R=b[F];++F;I.push(" implements "+this.printTypePath(R))}D=I}O=D.join("")}else{O=""}var P=w+O+" {\n";var U=[];var L=0;var V=e.fields;while(L<V.length){var M=V[L];++L;U.push(this.tabs+this.printFieldWithDelimiter(M))}s=P+U.join("\n")+"\n}";break;case 3:var q=a[2];var G="typedef "+e.name+(e.params!=null&&e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+" = ";var K;switch(q[1]){case 2:var X=q[2];K=this.printStructure(X);break;case 4:var W=q[3];var H=q[2];K=this.printExtension(H,W);break;default:K=this.printComplexType(q)}s=G+K+";";break;case 4:var J=a[4];var Q=a[3];var Y=a[2];var $="abstract "+e.name+(e.params!=null&&e.params.length>0?"<"+e.params.map(B(this,this.printTypeParamDecl)).join(", ")+">":"")+(Y==null?"":"("+this.printComplexType(Y)+")");var z;if(Q==null){z=""}else{var Z=[];var ee=0;while(ee<Q.length){var te=Q[ee];++ee;Z.push(" from "+this.printComplexType(te))}z=Z.join("")}var re=$+z;var ne;if(J==null){ne=""}else{var ie=[];var ae=0;while(ae<J.length){var se=J[ae];++ae;ie.push(" to "+this.printComplexType(se))}ne=ie.join("")}var oe=re+ne+" {\n";var ue=[];var le=0;var pe=e.fields;while(le<pe.length){var ce=pe[le];++le;ue.push(this.tabs+this.printFieldWithDelimiter(ce))}s=oe+ue.join("\n")+"\n}";break}n=i+s}this.tabs=r;return n},printFieldWithDelimiter:function(e){var t=this.printField(e);var r=e.kind;var n;switch(r[1]){case 1:if(r[2].expr==null){n=this.fieldDelimiter}else if(r[2].expr.expr[1]==12){n=""}else{n=this.fieldDelimiter}break;case 0:case 2:n=this.fieldDelimiter;break}return t+n},opt:function(e,t,r){if(r==null){r=""}if(e==null){return""}else{return r+t(e)}},__class__:p};var c=e["graphql"]["HaxeGenerator"]=function(e){this._interfaces_implemented=d._new();this._types_by_name=d._new();this._referenced_types=[];this._map_of_union_types=d._new();this._list_of_interfaces=[];this._defined_types=[];this._fragment_defs=[];this._stderr_writer=new h;this.init_options(e)};c.__name__=true;c.parse=function(e,t,r){if(r==null){r=true}var n={stdout:"",stderr:""};var i=new c(t);if(!i._stderr_writer.is_empty()){n.stderr=i._stderr_writer.toString()}else{try{n=i.parse_document(e)}catch(a){if(a instanceof j)a=a.val;var s=i.get_stderr();if(s.length==0){s=""+u.string(a)}n={stdout:"",stderr:s+"\nHaxeGenerator failed!"}}}if(r&&n.stderr.length>0){throw new j(n.stderr)}return n};c.prototype={get_stderr:function(){return this._stderr_writer.toString()},init_options:function(e){this._options=e==null?{}:e;if(this._options.generate==null){this._options.generate="typedefs"}if(this._options.disable_null_wrappers==null){this._options.disable_null_wrappers=false}},handle_args:function(e,t){if(t==null||t.length==0){return}var r=0;while(r<t.length){var n=t[r];++r;var i=""+c.ARGS_PREFIX+e.join("__")+"__"+n.field;var a={kind:"ObjectTypeDefinition",name:{value:i,kind:"Name"},fields:n["arguments"]};this.ingest_tstruct_like_type(a)}},handle_variables:function(e){if(e==null||e.variables==null||e.variables.length==0){return}var t=[];var r=0;var n=e.variables;while(r<n.length){var i=n[r];++r;t.push({kind:"FieldDefinition",type:i.type,name:i.variable.name})}var a={kind:"ObjectTypeDefinition",name:{value:""+c.OP_PREFIX+e.op_name+c.OP_VARS_SUFFIX,kind:"Name"},fields:t};this.ingest_tstruct_like_type(a)},parse_document:function(e){this.init_base_types();var t=null;var r=0;var n=e.definitions;while(r<n.length){var i=n[r];++r;var a=i.kind;switch(a){case"ObjectTypeExtension":this.apply_type_extension(i,e.definitions);break;case"SchemaDefinition":if(t!=null){this.error("Error: cannot specify two schema definitions")}t=this.ingest_schema_def(i);break;default:}}var s=0;var o=e.definitions;while(s<o.length){var u=o[s];++s;var l=u.kind;switch(l){case"EnumTypeDefinition":this.ingest_enum_type_def(u);break;case"FragmentDefinition":this._fragment_defs.push(u);break;case"InputObjectTypeDefinition":var p=this.ingest_tstruct_like_type(u);this.handle_args([this.get_def_name(u)],p);break;case"InterfaceTypeDefinition":this._list_of_interfaces.push(u.name.value);var c=this.ingest_tstruct_like_type(u);this.handle_args([this.get_def_name(u)],c);break;case"ObjectTypeDefinition":var h=this.ingest_tstruct_like_type(u);this.handle_args([this.get_def_name(u)],h);break;case"ObjectTypeExtension":break;case"OperationDefinition":break;case"ScalarTypeDefinition":this.ingest_scalar_type_def(u);break;case"SchemaDefinition":break;case"UnionTypeDefinition":this.ingest_union_type_def(u);break;default:var _=u.name!=null?" - "+u.name.value:"";this.error("Error: unknown / unsupported definition kind: "+u.kind+_)}}var f=0;var v=this._referenced_types;while(f<v.length){var d=v[f];++f;if(this._defined_types.indexOf(d)<0){this.error("Error: unknown type: "+d)}}var m=0;var g=e.definitions;while(m<g.length){var y=g[m];++m;var E=y.kind;if(E=="FragmentDefinition"){this.write_fragment_as_haxe_typedef(y)}}var k=0;var S=e.definitions;while(k<S.length){var T=S[k];++k;var b=T.kind;if(b=="OperationDefinition"){var x=this.write_operation_def_result(t,e,T);this.handle_variables(x)}}this.ensure_interface_implementations();return{stderr:this._stderr_writer.toString(),stdout:this.print_to_stdout()}},get_node_named:function(e,t,r){if(t==null||t.length==0){return null}var n=0;while(n<t.length){var i=t[n];++n;if(i.name.value==e){if(r!=null&&!r(i)){return i}}}return null},apply_type_extension:function(e,t){var r=this.get_node_named(e.name.value,t,function(e){if(e!=null){return e.kind=="ObjectTypeExtension"}else{return false}});if(r==null){this.error("Type extension for "+e.name.value+" didn't find base type!");return}var n=0;var i=["fields","directives","interfaces"];while(n<i.length){var a=i[n];++n;var s=o.field(e,a);if(s!=null&&s.length>0){var u=o.field(r,a);if(u==null){u=[];r[a]=u}var l=0;while(l<s.length){var p=s[l];++l;var c=this.get_node_named(p.name.value,u);if(c!=null){this.error("Type extension for "+e.name.value+" cannot redefine "+a+"."+p.name.value)}else{u.push(p)}}}}},ensure_interface_implementations:function(){var e=this._types_by_name.keys();while(e.hasNext()){var t=e.next();var r;if(this.is_object_type(t)){var n=this._interfaces_implemented;if(J[t]!=null){r=n.existsReserved(t)}else{r=n.h.hasOwnProperty(t)}}else{r=false}if(r){var i=0;var a=this._interfaces_implemented;var s=J[t]!=null?a.getReserved(t):a.h[t];while(i<s.length){var o=s[i];++i;var u;var l=this._types_by_name;var p=J[t]!=null?l.getReserved(t):l.h[t];if(p==null){this.error("Object type "+t+" expected to have fields!",true);u=null}else if(p[1]==4){var c=p[3];var h=p[2];u=c}else{this.error("Object type "+t+" expected to have fields!",true);u=null}var _;var f=this._types_by_name;var v=J[o]!=null?f.getReserved(o):f.h[o];if(v==null){this.error("Interface "+o+" expected to have fields!",true);_=null}else if(v[1]==4){var d=v[3];var m=v[2];_=d}else{this.error("Interface "+o+" expected to have fields!",true);_=null}var g=_.keys();while(g.hasNext()){var y=g.next();var E=J[y]!=null?_.getReserved(y):_.h[y];var k=J[y]!=null?u.getReserved(y):u.h[y];if(k==null){this.error("Type "+t+" implements "+o+", but doesn't provide field "+y);continue}if(E.is_array!=k.is_array){this.error("Type "+t+" implements "+o+", but the type of field "+y+" doesn't match (List vs non-List)");continue}if(E.is_optional!=k.is_optional){this.error("Type "+t+" implements "+o+", but the type of field "+y+" doesn't match (nullable vs non-nullable)");continue}var S;var T=E.type;if(T[1]==0){var b=T[2];S=b}else{throw new j("Interfaces can only specify TPaths")}var x;var w=k.type;if(w[1]==0){var O=w[2];x=O}else{throw new j("Interface implementations can only specify TPaths")}if(S!=x){var D="Covariance failed on "+t+" field ["+y+":"+x+"] for interface "+o+" ["+y+":"+S+"]";if(!this.is_object_type(x)){this.error(D)}else if(!(this.is_interface(S)&&this.implements_interface(x,S))){if(!(this.is_union(S)&&this.is_member_of_union(x,S))){this.error(D)}}}}}}}},get_def_name:function(e){return e.name.value},error:function(e,t){if(t==null){t=false}this._stderr_writer.append(e);if(t){throw new j(e)}},type_referenced:function(e){if(this._referenced_types.indexOf(e)<0){this._referenced_types.push(e)}},define_type:function(e){var t;switch(e[1]){case 0:var r=e[2];t=r;break;case 1:var n=e[2];t=n;break;case 2:var i=e[2];t=i;break;case 3:var a=e[2];t=a;break;case 4:var s=e[2];t=s;break}if(this._defined_types.indexOf(t)<0){this._defined_types.push(t);var o=this._types_by_name;if(J[t]!=null){o.setReserved(t,e)}else{o.h[t]=e}}else{this.error("Cannot define type "+t+" twice!")}},parse_field_type:function(e,t){var r=this;var n={type:null,is_array:false,is_optional:false};var i=null;i=function(e,t){if(t==null){return false}if(t.kind==e){return true}if(t.kind=="NamedType"){n.type=_.TPath(t.name.value);r.type_referenced(t.name.value)}return i(e,t.type)};var a=i;n.is_array=a("ListType",e);n.is_optional=e.kind!="NonNullType";a(" find base ",e);if(n.type==null){this.error("Malformed GQL definition - did not find the named type while parsing definition: "+t+"!")}return n},write_fragment_as_haxe_typedef:function(e){var t=e.typeCondition.name.value;var r=""+c.FRAGMENT_PREFIX+e.name.value;this.generate_type_based_on_selection_set(r,{debug_name:r,is_operation:false},e.selectionSet,t)},ingest_tstruct_like_type:function(e){var t=[];if(e.kind=="ObjectTypeDefinition"){var r=this._interfaces_implemented;var n=e.name.value;var i=[];if(J[n]!=null){r.setReserved(n,i)}else{r.h[n]=i}if(e.interfaces!=null){var a=0;var s=e.interfaces;while(a<s.length){var o=s[a];++a;var u=o.name.value;var l=this._interfaces_implemented;var p=e.name.value;(J[p]!=null?l.getReserved(p):l.h[p]).push(u)}}}var c=d._new();this.define_type(f.TStruct(e.name.value,c));var h=0;var _=e.fields;while(h<_.length){var v=_[h];++h;var m=this.parse_field_type(v.type,e.name.value);var g=v.name.value;if((J[g]!=null?c.getReserved(g):c.h[g])!=null){this.error("Error, type "+e.name.value+" defines field "+g+" more than once!")}if(J[g]!=null){c.setReserved(g,m)}else{c.h[g]=m}if(v["arguments"]!=null&&v["arguments"].length>0){t.push({field:g,arguments:v["arguments"]})}}return t},ingest_enum_type_def:function(e){var t=[];this.define_type(f.TEnum(e.name.value,t));var r=0;var n=e.values;while(r<n.length){var i=n[r];++r;t.push(i.name.value)}},ingest_scalar_type_def:function(e){this.define_type(f.TScalar(e.name.value))},ingest_union_type_def:function(e){var t=[];var r=0;var n=e.types;while(r<n.length){var i=n[r];++r;if(i.name==null){this.error("Expecting Named Types in Union "+e.name.value)}else{t.push(i.name.value)}}this.generate_union_of_types(t,e.name.value)},generate_union_of_types:function(e,t){if(t==null){e.sort(function(e,t){if(e>t){return 1}else{return-1}});t=c.GENERATED_UNION_PREFIX+e.join("__");if(this._defined_types.indexOf(t)>=0){this.error("Cannot redefine union "+t)}}var r=this._map_of_union_types;if(J[t]!=null){r.setReserved(t,e)}else{r.h[t]=e}this.define_type(f.TUnion(t,e));return t},ingest_schema_def:function(e){var t={query_type:null,mutation_type:null};var r=0;var n=e.operationTypes;while(r<n.length){var i=n[r];++r;var a=u.string(i.operation);switch(a){case"mutation":case"query":if(a=="query"){t.query_type=i.type.name.value}if(a=="mutation"){t.mutation_type=i.type.name.value}break;default:this.error("Unexpected schema operation: "+a)}}return t},resolve_type:function(e,t){if(t==null){t=""}switch(e[1]){case 0:var r=e[2];var n=this._types_by_name;var i=J[r]!=null?n.getReserved(r):n.h[r];if(i==null){this.error(""+t+"Error: type not found: "+r,true)}return i;case 1:var a=e[2];return a}},resolve_field:function(e,t){var r=null;var n=t!=null?"Error processing operation "+t.debug_name+": ":"";var i=e.join(".");while(e.length>0){var a=e.shift();if(r==null){var s=this._types_by_name;r=J[a]!=null?s.getReserved(a):s.h[a];if(r==null){this.error(""+n+"Didn't find root type "+a+" while resolving "+i,true)}if(e.length==0){return{is_array:false,is_optional:false,type:_.TPath(a)}}}else{switch(r[1]){case 0:var o=r[2];this.error(""+n+"Expecting type "+o+" to have field "+a+"!",true);break;case 1:var l=r[2];this.error(""+n+"Expecting type "+l+" to have field "+a+"!",true);break;case 2:var p=r[2];this.error(""+n+"Expecting type "+p+" to have field "+a+"!",true);break;case 3:var c=r[2];this.error("TODO: deterimne if graphql lets you poke down into common fields of unions...",true);break;case 4:var h=r[3];var f=r[2];var v=J[a]!=null?h.getReserved(a):h.h[a];if(v==null){this.error(""+n+"Expecting type "+f+" to have field "+a+"!",true)}if(e.length==0){this.resolve_type(v.type,n);return v}r=this.resolve_type(v.type,n);if(r==null){this.error(""+n+"Did not find type "+u.string(v.type)+" referenced by "+f+"."+a+"!",true)}break}}}this.error(""+n+"couldn't resolve path: "+i,true);return null},get_fragment_info:function(e){var t=null;if(e.kind=="FragmentSpread"){var r=c.FRAGMENT_PREFIX+e.name.value;var n=null;var i=0;var a=this._fragment_defs;while(i<a.length){var o=a[i];++i;if(o.name.value==e.name.value){n=o.typeCondition.name.value}}if(n==null){this.error("Error, did not find fragment spread named: "+r,true)}t={concrete:n,selectionSet:s.find(this._fragment_defs,function(t){return t.name.value==e.name.value}).selectionSet};return t}if(e.kind=="InlineFragment"){t={concrete:e.typeCondition.name.value,selectionSet:e.selectionSet};return t}this.error("Error determining fragment info for fragment node: "+u.string(e),true);return null},is_union:function(e){var t=this._map_of_union_types;if(J[e]!=null){return t.existsReserved(e)}else{return t.h.hasOwnProperty(e)}},is_interface:function(e){return this._list_of_interfaces.indexOf(e)>=0},is_object_type:function(e){var t=this._types_by_name;var r=J[e]!=null?t.getReserved(e):t.h[e];if(r==null){return false}else if(r[1]==4){return!this.is_interface(e)}else{return false}},implements_interface:function(e,t){var r;if(this.is_interface(t)){var n=this._interfaces_implemented;if(J[e]!=null){r=n.existsReserved(e)}else{r=n.h.hasOwnProperty(e)}}else{r=false}if(r){var i=this._interfaces_implemented;return(J[e]!=null?i.getReserved(e):i.h[e]).indexOf(t)>=0}else{return false}},is_member_of_union:function(e,t){if(!this.is_union(t)){return false}var r=0;var n=this._map_of_union_types;var i=J[t]!=null?n.getReserved(t):n.h[t];while(r<i.length){var a=i[r];++r;if(a==e){return true}}return false},check_constraint:function(e,t){if(e==t){return true}if(!this.is_object_type(e)){this.error("Check_constraint is only valid on Object types, not "+e)}if(this.is_interface(t)){return this.implements_interface(e,t)}if(this.is_union(t)){var r=this._map_of_union_types;return(J[t]!=null?r.getReserved(t):r.h[t]).indexOf(e)>=0}return false},resolve_fragment_nodes:function(e,t,r){if(e==null||e.length==0){return}var n=0;while(n<e.length){var i=e[n];++n;if(i.kind=="Field"){var a=i;r.push({constraints:t,field_node:a,usage:0})}else if(i.kind=="FragmentSpread"||i.kind=="InlineFragment"){var s=this.get_fragment_info(i);var o=t.slice(0);o.push(s.concrete);this.resolve_fragment_nodes(s.selectionSet.selections,o,r)}}},get_possible_object_types_from:function(e){if(this.is_interface(e)){var t=[];var r=this._interfaces_implemented.keys();while(r.hasNext()){var n=r.next();var i=this._interfaces_implemented;var a=J[n]!=null?i.getReserved(n):i.h[n];if(a.indexOf(e)>=0){t.push(n)}}if(t.length==0){this.error("Query or fragment on interface "+e+", did not find any Object types that implement it!")}return t}if(this.is_union(e)){var s=[];var o=0;var u=this._map_of_union_types;var l=J[e]!=null?u.getReserved(e):u.h[e];while(o<l.length){var p=l[o];++o;if(!this.is_object_type(p)){this.error("Union "+e+" may not contain any type ("+p+") other than object types, per GraphQL spec")}else{s.push(p)}}return s}var c=this._types_by_name;var h=J[e]!=null?c.getReserved(e):c.h[e];if(h==null){this.error("Cannot create fragment or operation on non-Object type "+e,true);return null}else if(h[1]==4){return[e]}else{this.error("Cannot create fragment or operation on non-Object type "+e,true);return null}},generate_type_based_on_selection_set:function(e,t,r,n,i){if(i==null){i=0}if(c._basic_types.indexOf(n)>=0){this.error("Cannot create a fragment or operation "+t.debug_name+" on a basic type, "+n,true)}var o=this.get_possible_object_types_from(n);var u=[];this.resolve_fragment_nodes(r.selections,[],u);var p=d._new();var h=0;while(h<u.length){var v=u[h];++h;var m=0;while(m<o.length){var g=o[m];++m;var y=true;var E=0;var k=v.constraints;while(E<k.length){var S=k[E];++E;if(!this.check_constraint(g,S)){y=false;break}}if(y){v.usage++;if(!(J[g]!=null?p.existsReserved(g):p.h.hasOwnProperty(g))){var T=[];if(J[g]!=null){p.setReserved(g,T)}else{p.h[g]=T}}(J[g]!=null?p.getReserved(g):p.h[g]).push(v.field_node)}}}var b=0;while(b<o.length){var x=o[b];++b;if(!(J[x]!=null?p.existsReserved(x):p.h.hasOwnProperty(x))||(J[x]!=null?p.getReserved(x):p.h[x])==null){if(this.is_union(n)){var w=[];if(J[x]!=null){p.setReserved(x,w)}else{p.h[x]=w}}else{this.error("Error: fragment or op "+t.debug_name+" selected no fields for possible object type "+x)}}}var O=0;while(O<u.length){var D=u[O];++O;if(D.usage==0){this.error("Error: fragment or op "+t.debug_name+" specified field "+D.field_node.name.value+" that didn't get used in possible types ["+o.join(", ")+"] via constraints ["+D.constraints.join(", ")+"]")}}var N=d._new();var A=[];var C=0;while(C<o.length){var I=o[C];++C;var F=d._new();if(J[I]!=null){N.setReserved(I,F)}else{N.h[I]=F}var R=[I];var P=o.length==1?e:e+"_ON_"+I;A.push(P);this.define_type(f.TStruct(P,F));var j=[];if((J[I]!=null?p.getReserved(I):p.h[I])==null&&this.is_union(n)){continue}var U=0;var L=J[I]!=null?p.getReserved(I):p.h[I];while(U<L.length){var V=L[U];++U;var M=V.kind;switch(M){case"Field":var B=V;var q=B.selectionSet!=null&&B.selectionSet.selections!=null&&B.selectionSet.selections.length>0;var G=B.name.value;var K=B.alias==null?G:B.alias.value;if(t.is_operation){this.validate_directives(B,t)}var X=""+G+" -> "+K;if(j.indexOf(X)>=0){continue}j.push(X);var W=R.slice(0);W.push(G);var H=this.resolve_field(W,t);var Q=this.resolve_type(H.type);switch(Q[1]){case 0:var Y=Q[2];if(q){this.error("Cannot specify sub-fields of "+Y+" at "+R.join(".")+" of operation "+t.debug_name,true)}if(J[K]!=null){F.setReserved(K,H)}else{F.h[K]=H}break;case 1:var $=Q[2];if(q){this.error("Cannot specify sub-fields of "+$+" at "+R.join(".")+" of operation "+t.debug_name,true)}if(J[K]!=null){F.setReserved(K,H)}else{F.h[K]=H}break;case 2:var z=Q[2];if(q){this.error("Cannot specify sub-fields of "+z+" at "+R.join(".")+" of operation "+t.debug_name,true)}if(J[K]!=null){F.setReserved(K,H)}else{F.h[K]=H}break;case 3:var Z=Q[2];if(!q){this.error("Must specify sub-fields of "+Z+" at "+R.join(".")+" of operation "+t.debug_name,true)}if(this.is_union(Z)){if(s.find(B.selectionSet.selections,function(e){return e.kind=="Field"})!=null){this.error("Can only specify fragment selections of union "+Z+" at "+R.join(".")+" of operation "+t.debug_name,true)}}var ee=i==0&&l.endsWith(e,c.OP_OUTER_SUFFIX)?l.replace(e,c.OP_OUTER_SUFFIX,c.OP_INNER_SUFFIX):e+"__"+G;var te=this.generate_type_based_on_selection_set(ee,t,B.selectionSet,Z,i+1);var re={type:null,is_array:H.is_array,is_optional:H.is_optional};if(J[K]!=null){F.setReserved(K,re)}else{F.h[K]=re}if(this.is_union(ee)){re.type=_.TPath(ee)}else if(i==0){re.type=_.TPath(ee)}else{this._types_by_name.remove(ee);a.remove(this._defined_types,ee);re.type=_.TAnon(te)}break;case 4:var ne=Q[2];if(!q){this.error("Must specify sub-fields of "+ne+" at "+R.join(".")+" of operation "+t.debug_name,true)}if(this.is_union(ne)){if(s.find(B.selectionSet.selections,function(e){return e.kind=="Field"})!=null){this.error("Can only specify fragment selections of union "+ne+" at "+R.join(".")+" of operation "+t.debug_name,true)}}var ie=i==0&&l.endsWith(e,c.OP_OUTER_SUFFIX)?l.replace(e,c.OP_OUTER_SUFFIX,c.OP_INNER_SUFFIX):e+"__"+G;var ae=this.generate_type_based_on_selection_set(ie,t,B.selectionSet,ne,i+1);var se={type:null,is_array:H.is_array,is_optional:H.is_optional};if(J[K]!=null){F.setReserved(K,se)}else{F.h[K]=se}if(this.is_union(ie)){se.type=_.TPath(ie)}else if(i==0){se.type=_.TPath(ie)}else{this._types_by_name.remove(ie);a.remove(this._defined_types,ie);se.type=_.TAnon(ae)}break}break;case"FragmentSpread":case"InlineFragment":
this.error("Should not get fragment nodes here...",true);break;default:this.error("Unhandled sel_node kind "+V.kind,true)}}}if(o.length>1){this.generate_union_of_types(A,e);var oe=this._types_by_name;return J[e]!=null?oe.getReserved(e):oe.h[e]}else{var ue=this._types_by_name;return J[e]!=null?ue.getReserved(e):ue.h[e]}},validate_directives:function(e,t){if(e.directives!=null){var r=0;var n=e.directives;while(r<n.length){var i=n[r];++r;if(i["arguments"]!=null){var a=0;var s=i["arguments"];while(a<s.length){var o=s[a];++a;var u=o.value.name.value;var l=false;var p=0;var c=t.op_variables;while(p<c.length){var h=c[p];++p;if(h.variable.name.value==u){l=true}}if(!l){this.error("Error: operation "+t.debug_name+" is expecting parameter "+u+" which hasn't been defined in the operation variables!")}}}}}},write_operation_def_result:function(e,t,r){if(r.name==null||r.name.value==null){this.error("Unnamed / anonymous operations are not supported...",true)}var n=r.name.value;var i="";if(r.operation=="query"){if(e==null||e.query_type==null){i="Query"}else{i=e.query_type}}else if(r.operation=="mutation"){if(e==null||e.mutation_type==null){i="Mutation"}else{i=e.mutation_type}}else{this.error("Error processing "+n+": Only query and mutation are supported.",true)}this.generate_type_based_on_selection_set(""+c.OP_PREFIX+n+c.OP_OUTER_SUFFIX,{debug_name:n,is_operation:true,op_variables:r.variableDefinitions},r.selectionSet,i);return{op_name:n,variables:r.variableDefinitions}},print_to_stdout:function(){var e=new h;e.append("/* - - - - Haxe / GraphQL compatibility types - - - - */\nabstract ID(String) to String from String {\n  // Relaxed safety -- allow implicit fromString\n  //  TODO: optional strict safety -- require explicit fromString:\n  //  public static inline function fromString(s:String) return cast s;\n  //  public static inline function ofString(s:String) return cast s;\n}");e.append("");var t=this._types_by_name;if(J["Bool"]!=null?t.existsReserved("Bool"):t.h.hasOwnProperty("Bool")){v.bool_collision=true}var r=this._types_by_name.keys();while(r.hasNext()){var n=r.next();if(c._basic_types.indexOf(n)>=0){continue}var i=this._types_by_name;var a=J[n]!=null?i.getReserved(n):i.h[n];e.append(v.type_to_string(a));e.append("")}e.append("\n\n/* - - - - - - - - - - - - - - - - - - - - - - - - - */\n\n");return e.toString()},init_base_types:function(){var e=0;var t=c._basic_types;while(e<t.length){var r=t[e];++e;this.define_type(f.TBasic(r))}},__class__:c};var h=function(){this._output=[]};h.__name__=true;h.prototype={is_empty:function(){return this._output.length==0},append:function(e){this._output.push(e)},toString:function(){return this._output.join("\n")},__class__:h};var _={__ename__:true,__constructs__:["TPath","TAnon"]};_.TPath=function(e){var t=["TPath",0,e];t.__enum__=_;t.toString=r;return t};_.TAnon=function(e){var t=["TAnon",1,e];t.__enum__=_;t.toString=r;return t};var f={__ename__:true,__constructs__:["TBasic","TScalar","TEnum","TUnion","TStruct"]};f.TBasic=function(e){var t=["TBasic",0,e];t.__enum__=f;t.toString=r;return t};f.TScalar=function(e){var t=["TScalar",1,e];t.__enum__=f;t.toString=r;return t};f.TEnum=function(e,t){var n=["TEnum",2,e,t];n.__enum__=f;n.toString=r;return n};f.TUnion=function(e,t){var n=["TUnion",3,e,t];n.__enum__=f;n.toString=r;return n};f.TStruct=function(e,t){var n=["TStruct",4,e,t];n.__enum__=f;n.toString=r;return n};var v=function(){};v.__name__=true;v.gql_to_haxe_type_name_transforms=function(e){if(e=="Bool"&&v.bool_collision){return"Bool"+"__"}if(e=="Boolean"){return"Bool"}return e};v.to_haxe_field=function(e,t){var r=t.type;switch(r[1]){case 0:var n=r[2];var i=C.TPath({pack:[],name:v.gql_to_haxe_type_name_transforms(n)});if(t.is_array){i=C.TPath({pack:[],name:"Array",params:[I.TPType(i)]})}var a={name:e,kind:R.FVar(i,null),meta:[],pos:v.FAKE_POS};if(t.is_optional){a.meta.push({name:":optional",pos:v.FAKE_POS})}return a;case 1:if(r[2][1]==4){var s=r[2][3];var o=r[2][2];var l=[];var p=s.keys();while(p.hasNext()){var c=p.next();var h=J[c]!=null?s.getReserved(c):s.h[c];l.push(v.to_haxe_field(c,h))}var _=C.TAnonymous(l);if(t.is_array){_=C.TPath({pack:[],name:"Array",params:[I.TPType(_)]})}var f={name:e,kind:R.FVar(_,null),meta:[],pos:v.FAKE_POS};if(t.is_optional){f.meta.push({name:":optional",pos:v.FAKE_POS})}return f}else{var d=r[2];throw new j("Non-struct types are not supported in TAnon: "+u.string(d))}break}};v.type_to_string=function(e){var t=new p("  ",true);switch(e[1]){case 0:var r=e[2];return"";case 1:var n=e[2];return"/* Scalar type "+n+" */\nabstract "+n+"(Dynamic) { }";case 2:var i=e[3];var s=e[2];return"/* Enum type "+s+" */\n@:enum abstract "+s+"(String) {\n  "+i.map(function(e){return"var "+e+' = "'+e+'";'}).join("\n  ")+"\n}";case 3:var o=e[3];var u=e[2];var l=new h;var c=o.map(function(e){return e}).join(" | ");l.append("/* union "+u+(" = "+c+" */"));l.append("abstract "+u+"(Dynamic) {");var _=0;while(_<o.length){var f=o[_];++_;l.append(" @:from static inline function from"+f+"(v:"+f+"):"+u+" return cast v;");var d=f;var m="_ON_";if(d.indexOf(m)>=0){d=a.substr(d,d.indexOf(m)+m.length,null)}l.append(" public inline function as"+"__"+d+"():"+f+" return cast this;")}l.append("}");return l.toString();case 4:var g=e[3];var y=e[2];var E={pack:[],name:v.gql_to_haxe_type_name_transforms(y),pos:v.FAKE_POS,kind:P.TDStructure,fields:[]};var k=g.keys();while(k.hasNext()){var S=k.next();E.fields.push(v.to_haxe_field(S,J[S]!=null?g.getReserved(S):g.h[S]))}return t.printTypeDefinition(E)}};var d={};d.__name__=true;d._new=function(){var e;return new w};var m=function(e){this.lineStart=0;this.line=1;this.options=e;this.advance=B(this,this.advanceLexer)};m.__name__=true;m.createLexer=function(e,t){var r=g.asToken("<SOF>",0,0,0,0,null);var n=new m(t);n.source=e;n.lastToken=r;n.token=r;return n};m.prototype={advanceLexer:function(){this.lastToken=this.token;var e=this.token=this.lookahead();return e},lookahead:function(){var e=this.token;if(e.kind!="<EOF>"){while(true){if(e.next!=null){e=e.next}else{e=e.next=this.readToken(this,e)}if(!(e.kind=="Comment")){break}}}return e},printCharCode:function(e){if(e<127){return JSON.stringify(String.fromCharCode(e))}else{return"ESCMAD"}},readToken:function(e,t){var r=e.source;var n=r;var i=n.length;var a=this.positionAfterWhitespace(n,t.end,e);var s=e.line;var o=1+a-e.lineStart;if(a>=i){return g.asToken("<EOF>",i,i,s,o,t)}var u=r.string.charCodeAt(a+r.start);if(u<32&&u!=9&&u!=10&&u!=13){throw new j(this.syntaxError(r,s,this.lineStart,a,"Cannot contain the invalid character "+this.printCharCode(u)+"."))}switch(u){case 33:return g.asToken("!",a,a+1,s,o,t);case 34:if(r.string.charCodeAt(a+1+r.start)==34&&r.string.charCodeAt(a+2+r.start)==34){return this.readBlockString(r,a,s,o,t)}return this.readString(r,a,s,o,t);case 35:return this.readComment(r,a,s,o,t);case 36:return g.asToken("$",a,a+1,s,o,t);case 38:return g.asToken("&",a,a+1,s,o,t);case 40:return g.asToken("(",a,a+1,s,o,t);case 41:return g.asToken(")",a,a+1,s,o,t);case 46:if(r.string.charCodeAt(a+1+r.start)==46&&r.string.charCodeAt(a+2+r.start)==46){return g.asToken("...",a,a+3,s,o,t)}break;case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(r,a,u,s,o,t);case 58:return g.asToken(":",a,a+1,s,o,t);case 61:return g.asToken("=",a,a+1,s,o,t);case 64:return g.asToken("@",a,a+1,s,o,t);case 91:return g.asToken("[",a,a+1,s,o,t);case 93:return g.asToken("]",a,a+1,s,o,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return this.readName(r,a,s,o,t);case 123:return g.asToken("{",a,a+1,s,o,t);case 124:return g.asToken("|",a,a+1,s,o,t);case 125:return g.asToken("}",a,a+1,s,o,t)}throw new j(this.syntaxError(r,s,this.lineStart,a,this.unexpectedCharacterMessage(u)))},unexpectedCharacterMessage:function(e){if(e==39){return"Unexpected single quote character ('), did you mean to use "+'a double quote (")?'}return"Cannot parse the unexpected character "+this.printCharCode(e)+"."},positionAfterWhitespace:function(e,t,r){var n=e.length;var i=t;while(i<n){var a=this.source;var s=a.string.charCodeAt(i+a.start);if(s==9||s==32||s==44||s==65279){++i}else if(s==10){++i;++r.line;r.lineStart=i}else if(s==13){var o=this.source;if(o.string.charCodeAt(i+1+o.start)==10){i+=2}else{++i}++r.line;r.lineStart=i}else{break}}return i},readComment:function(e,t,r,n,i){var a=e;var s;var o=t;while(true){s=e.string.charCodeAt(++o+e.start);if(!(s!=null&&(s>31||s==9))){break}}var u;var l;u=t+1;l=o;return g.asToken("Comment",t,o,r,n,i,b._new(a.string,b.wrap(a,u)+a.start,b.clamp(a,l)+a.start).toString())},readNumber:function(e,t,r,n,i,a){var s=e;var o=r;var u=t;var l=false;if(o==45){o=e.string.charCodeAt(++u+e.start)}if(o==48){o=e.string.charCodeAt(++u+e.start);if(o>=48&&o<=57){throw new j(this.syntaxError(e,n,this.lineStart,u,"Invalid number, unexpected digit after 0: "+this.printCharCode(o)+"."))}}else{u=this.readDigits(e,u,o);o=e.string.charCodeAt(u+e.start)}if(o==46){l=true;o=e.string.charCodeAt(++u+e.start);u=this.readDigits(e,u,o);o=e.string.charCodeAt(u+e.start)}if(o==69||o==101){l=true;o=e.string.charCodeAt(++u+e.start);if(o==43||o==45){o=e.string.charCodeAt(++u+e.start)}u=this.readDigits(e,u,o)}var p;var c;p=t;c=u;return g.asToken(l?"Float":"Int",t,u,n,i,a,b._new(s.string,b.wrap(s,p)+s.start,b.clamp(s,c)+s.start).toString())},readDigits:function(e,t,r){var n=e;var i=t;var a=r;if(a>=48&&a<=57){while(true){a=e.string.charCodeAt(++i+e.start);if(!(a>=48&&a<=57)){break}}return i}throw new j(this.syntaxError(e,this.line,this.lineStart,i,"Invalid number, expected digit but got: "+this.printCharCode(a)+"."))},readString:function(e,t,r,n,i){var a=e;var s=t+1;var o=s;var u=0;var l="";while(true){var p;var c;var h;if(s<a.length){u=e.string.charCodeAt(s+e.start);h=u!=null}else{h=false}if(h){c=u!=10}else{c=false}if(c){p=u!=13}else{p=false}if(!p){break}if(u==34){var _;var f;_=o;f=s;l+=b._new(a.string,b.wrap(a,_)+a.start,b.clamp(a,f)+a.start).toString();return g.asToken("String",t,s+1,r,n,i,l)}if(u<32&&u!=9){throw new j(this.syntaxError(e,r,this.lineStart,s,"Invalid character within String: "+this.printCharCode(u)+"."))}++s;if(u==92){var v;var d;v=o;d=s-1;l+=b._new(a.string,b.wrap(a,v)+a.start,b.clamp(a,d)+a.start).toString();u=e.string.charCodeAt(s+e.start);switch(u){case 34:l+='"';break;case 47:l+="/";break;case 92:l+="\\";break;case 98:l+="\b";break;case 102:l+="\f";break;case 110:l+="\n";break;case 114:l+="\r";break;case 116:l+="	";break;case 117:var m=this.uniCharCode(e.string.charCodeAt(s+1+e.start),e.string.charCodeAt(s+2+e.start),e.string.charCodeAt(s+3+e.start),e.string.charCodeAt(s+4+e.start));if(m<0){var y;var E;y=s+1;E=s+5;throw new j(this.syntaxError(e,r,this.lineStart,s,"Invalid character escape sequence: "+("\\u"+b._new(a.string,b.wrap(a,y)+a.start,b.clamp(a,E)+a.start).toString()+".")))}l+=String.fromCharCode(m);s+=4;break;default:throw new j(this.syntaxError(e,r,this.lineStart,s,"Invalid character escape sequence: "+String.fromCharCode(u)+"."))}o=++s}}throw new j(this.syntaxError(e,r,this.lineStart,s,"Unterminated string."))},readBlockString:function(e,t,r,n,i){var a=e;var s=t+3;var o=s;var u=0;var l="";while(true){var p;if(s<a.length){u=e.string.charCodeAt(s+e.start);p=u!=null}else{p=false}if(!p){break}if(u==34&&e.string.charCodeAt(s+1+e.start)==34&&e.string.charCodeAt(s+2+e.start)==34){var c;var h;c=o;h=s;l+=b._new(a.string,b.wrap(a,c)+a.start,b.clamp(a,h)+a.start).toString();var _=s+3;throw new j("TODO: implement blockStringValue(rawValue)")}if(u<32&&u!=9&&u!=10&&u!=13){throw new j(this.syntaxError(e,r,this.lineStart,s,"Invalid character within String: "+this.printCharCode(u)+"."))}if(u==92&&e.string.charCodeAt(s+1+e.start)==34&&e.string.charCodeAt(s+2+e.start)==34&&e.string.charCodeAt(s+3+e.start)==34){var f;var v;f=o;v=s;l+=b._new(a.string,b.wrap(a,f)+a.start,b.clamp(a,v)+a.start).toString()+'"""';s+=4;o=s}else{++s}}throw new j(this.syntaxError(e,r,this.lineStart,s,"Unterminated string."))},uniCharCode:function(e,t,r,n){return this.char2hex(e)<<12|this.char2hex(t)<<8|this.char2hex(r)<<4|this.char2hex(n)},char2hex:function(e){if(e>=48&&e<=57){return e-48}else if(e>=65&&e<=70){return e-55}else if(e>=97&&e<=102){return e-87}else{return-1}},readName:function(e,t,r,n,i){var a=e;var s=a.length;var o=t+1;var u=0;while(true){var l;var p;if(o!=s){u=e.string.charCodeAt(o+e.start);p=u!=null}else{p=false}if(p){if(!(u==95||u>=48&&u<=57||u>=65&&u<=90)){if(u>=97){l=u<=122}else{l=false}}else{l=true}}else{l=false}if(!l){break}++o}var c;var h;c=t;h=o;return g.asToken("Name",t,o,r,n,i,b._new(a.string,b.wrap(a,c)+a.start,b.clamp(a,h)+a.start).toString())},syntaxError:function(e,t,r,n,i){return S.syntaxError(e,t,r,n,i)},__class__:m};var g=function(){};g.__name__=true;g.asToken=function(e,t,r,n,i,a,s){return{kind:e,start:t,end:r,line:n,column:i,value:s,prev:a,next:null}};var y=function(){};y.__name__=true;y.prototype={parseName:function(e){var t=this.expect(e,"Name");return{kind:"Name",value:t.value,loc:this.loc(e,t)}},parseDocument:function(e){var t=e.token;this.expect(e,"<SOF>");var r=[];while(true){r.push(this.parseDefinition(e));if(!!this.skip(e,"<EOF>")){break}}return{kind:"Document",definitions:r,loc:this.loc(e,t)}},parseDefinition:function(e){if(this.peek(e,"Name")){var t=e.token.value;switch(t){case"fragment":case"mutation":case"query":case"subscription":return this.parseExecutableDefinition(e);case"directive":case"enum":case"extend":case"input":case"interface":case"scalar":case"schema":case"type":case"union":return this.parseTypeSystemDefinition(e)}}else if(this.peek(e,"{")){return this.parseExecutableDefinition(e)}else if(this.peekDescription(e)){return this.parseTypeSystemDefinition(e)}throw new j(this.unexpected(e))},parseExecutableDefinition:function(e){if(this.peek(e,"Name")){var t=e.token.value;switch(t){case"fragment":return this.parseFragmentDefinition(e);case"mutation":case"query":case"subscription":return this.parseOperationDefinition(e)}}else if(this.peek(e,"{")){return this.parseOperationDefinition(e)}throw new j(this.unexpected(e))},parseOperationDefinition:function(e){var t=e.token;if(this.peek(e,"{")){return{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(e),loc:this.loc(e,t)}}var r=this.parseOperationType(e);var n=null;if(this.peek(e,"Name")){n=this.parseName(e)}return{kind:"OperationDefinition",operation:r,name:n,variableDefinitions:this.parseVariableDefinitions(e),directives:this.parseDirectives(e,false),selectionSet:this.parseSelectionSet(e),loc:this.loc(e,t)}},parseOperationType:function(e){var t=this.expect(e,"Name");var r=t.value;switch(r){case"mutation":return"mutation";case"query":return"query";case"subscription":return"subscription"}throw new j(this.unexpected(e,t))},parseVariableDefinitions:function(e){if(this.peek(e,"(")){return this.many(e,"(",B(this,this.parseVariableDefinition),")")}else{return[]}},parseVariableDefinition:function(e){var t=e.token;var r=this.parseVariable(e);this.expect(e,":");return{kind:"VariableDefinition",variable:r,type:this.parseTypeReference(e),defaultValue:this.skip(e,"=")?this.parseValueLiteral(e,true):null,loc:this.loc(e,t)}},parseVariable:function(e){var t=e.token;this.expect(e,"$");return{kind:"Variable",name:this.parseName(e),loc:this.loc(e,t)}},parseSelectionSet:function(e){var t=e.token;return{kind:"SelectionSet",selections:this.many(e,"{",B(this,this.parseSelection),"}"),loc:this.loc(e,t)}},parseSelection:function(e){if(this.peek(e,"...")){return this.parseFragment(e)}else{return this.parseField(e)}},parseField:function(e){var t=e.token;var r=this.parseName(e);var n=null;var i=null;if(this.skip(e,":")){n=r;i=this.parseName(e)}else{i=r}return{kind:"Field",alias:n,name:i,arguments:this.parseArguments(e,false),directives:this.parseDirectives(e,false),selectionSet:this.peek(e,"{")?this.parseSelectionSet(e):null,loc:this.loc(e,t)}},parseArguments:function(e,t){var r=t?B(this,this.parseConstArgument):B(this,this.parseArgument);if(this.peek(e,"(")){return this.many(e,"(",r,")")}else{return[]}},parseArgument:function(e){var t=e.token;var r=this.parseName(e);this.expect(e,":");return{kind:"Argument",name:r,value:this.parseValueLiteral(e,false),loc:this.loc(e,t)}},parseConstArgument:function(e){var t=e.token;var r=this.parseName(e);this.expect(e,":");return{kind:"Argument",name:r,value:this.parseConstValue(e),loc:this.loc(e,t)}},parseFragment:function(e){var t=e.token;this.expect(e,"...");if(this.peek(e,"Name")&&e.token.value!="on"){return{kind:"FragmentSpread",name:this.parseFragmentName(e),directives:this.parseDirectives(e,false),loc:this.loc(e,t)}}var r=null;if(e.token.value=="on"){e.advance();r=this.parseNamedType(e)}return{kind:"InlineFragment",typeCondition:r,directives:this.parseDirectives(e,false),selectionSet:this.parseSelectionSet(e),loc:this.loc(e,t)}},parseFragmentDefinition:function(e){var t=e.token;this.expectKeyword(e,"fragment");if(e.options.experimentalFragmentVariables){var r=this.parseFragmentName(e);var n=this.parseVariableDefinitions(e);this.expectKeyword(e,"on");return{kind:"FragmentDefinition",name:r,variableDefinitions:n,typeCondition:this.parseNamedType(e),directives:this.parseDirectives(e,false),selectionSet:this.parseSelectionSet(e),loc:this.loc(e,t)}}var i=this.parseFragmentName(e);this.expectKeyword(e,"on");return{kind:"FragmentDefinition",name:i,typeCondition:this.parseNamedType(e),directives:this.parseDirectives(e,false),selectionSet:this.parseSelectionSet(e),loc:this.loc(e,t)}},parseFragmentName:function(e){if(e.token.value=="on"){throw new j(this.unexpected(e))}return this.parseName(e)},parseValueLiteral:function(e,t){var r=e.token;var n=r.kind;switch(n){case"$":if(!t){return this.parseVariable(e)}break;case"Float":e.advance();return{kind:"FloatValue",value:r.value,loc:this.loc(e,r)};case"Int":e.advance();return{kind:"IntValue",value:r.value,loc:this.loc(e,r)};case"Name":if(r.value=="true"||r.value=="false"){e.advance();return{kind:"BooleanValue",value:r.value=="true",loc:this.loc(e,r)}}else if(r.value=="null"){e.advance();return{kind:"NullValue",loc:this.loc(e,r)}}e.advance();return{kind:"EnumValue",value:r.value,loc:this.loc(e,r)};case"BlockString":case"String":return this.parseStringLiteral(e);case"[":return this.parseList(e,t);case"{":return this.parseObject(e,t);default:}throw new j(this.unexpected(e))},parseStringLiteral:function(e){var t=e.token;e.advance();return{kind:"StringValue",value:t.value,block:t.kind=="BlockString",loc:this.loc(e,t)}},parseConstValue:function(e){return this.parseValueLiteral(e,true)},parseValueValue:function(e){return this.parseValueLiteral(e,false)},parseList:function(e,t){var r=e.token;var n=t?B(this,this.parseConstValue):B(this,this.parseValueValue);return{kind:"ListValue",values:this.any(e,"[",n,"]"),loc:this.loc(e,r)}},parseObject:function(e,t){var r=e.token;this.expect(e,"{");var n=[];while(!this.skip(e,"}"))n.push(this.parseObjectField(e,t));return{kind:"ObjectValue",fields:n,loc:this.loc(e,r)}},parseObjectField:function(e,t){var r=e.token;var n=this.parseName(e);this.expect(e,":");return{kind:"ObjectField",name:n,value:this.parseValueLiteral(e,t),loc:this.loc(e,r)}},parseDirectives:function(e,t){var r=[];while(this.peek(e,"@"))r.push(this.parseDirective(e,t));return r},parseDirective:function(e,t){var r=e.token;this.expect(e,"@");return{kind:"Directive",name:this.parseName(e),arguments:this.parseArguments(e,t),loc:this.loc(e,r)}},parseTypeReference:function(e){var t=e.token;var r=null;if(this.skip(e,"[")){r=this.parseTypeReference(e);this.expect(e,"]");r={kind:"ListType",type:r,loc:this.loc(e,t)}}else{r=this.parseNamedType(e)}if(this.skip(e,"!")){return{kind:"NonNullType",type:r,loc:this.loc(e,t)}}return r},parseNamedType:function(e){var t=e.token;return{kind:"NamedType",name:this.parseName(e),loc:this.loc(e,t)}},parseTypeSystemDefinition:function(e){var t=this.peekDescription(e)?e.lookahead():e.token;if(t.kind=="Name"){var r=t.value;switch(r){case"directive":return this.parseDirectiveDefinition(e);case"enum":return this.parseEnumTypeDefinition(e);case"extend":return this.parseTypeExtension(e);case"input":return this.parseInputObjectTypeDefinition(e);case"interface":return this.parseInterfaceTypeDefinition(e);case"scalar":return this.parseScalarTypeDefinition(e);case"schema":return this.parseSchemaDefinition(e);case"type":return this.parseObjectTypeDefinition(e);case"union":return this.parseUnionTypeDefinition(e)}}throw new j(this.unexpected(e,t))},peekDescription:function(e){if(!this.peek(e,"String")){return this.peek(e,"BlockString")}else{return true}},parseDescription:function(e){if(!this.peekDescription(e)){return null}return this.parseStringLiteral(e)},parseSchemaDefinition:function(e){var t=e.token;this.expectKeyword(e,"schema");var r=this.parseDirectives(e,true);var n=this.many(e,"{",B(this,this.parseOperationTypeDefinition),"}");return{kind:"SchemaDefinition",directives:r,operationTypes:n,loc:this.loc(e,t)}},parseOperationTypeDefinition:function(e){var t=e.token;var r=this.parseOperationType(e);this.expect(e,":");var n=this.parseNamedType(e);return{kind:"OperationTypeDefinition",operation:r,type:n,loc:this.loc(e,t)}},parseScalarTypeDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"scalar");var n=this.parseName(e);var i=this.parseDirectives(e,true);return{kind:"ScalarTypeDefinition",description:r,name:n,directives:i,loc:this.loc(e,t)}},parseObjectTypeDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"type");var n=this.parseName(e);var i=this.parseImplementsInterfaces(e);var a=this.parseDirectives(e,true);var s=this.parseFieldsDefinition(e);return{kind:"ObjectTypeDefinition",description:r,name:n,interfaces:i,directives:a,fields:s,loc:this.loc(e,t)}},parseImplementsInterfaces:function(e){var t=[];if(e.token.value=="implements"){e.advance();this.skip(e,"&");while(true){t.push(this.parseNamedType(e));if(!(this.skip(e,"&")||e.options.allowLegacySDLImplementsInterfaces&&this.peek(e,"Name"))){break}}}return t},parseFieldsDefinition:function(e){if(e.options.allowLegacySDLEmptyFields&&this.peek(e,"{")&&e.lookahead().kind=="}"){e.advance();e.advance();return[]}if(this.peek(e,"{")){return this.many(e,"{",B(this,this.parseFieldDefinition),"}")}else{return[]}},parseFieldDefinition:function(e){var t=e.token;var r=this.parseDescription(e);var n=this.parseName(e);var i=this.parseArgumentDefs(e);this.expect(e,":");var a=this.parseTypeReference(e);var s=this.parseDirectives(e,true);return{kind:"FieldDefinition",description:r,name:n,arguments:i,type:a,directives:s,loc:this.loc(e,t)}},parseArgumentDefs:function(e){if(!this.peek(e,"(")){return[]}return this.many(e,"(",B(this,this.parseInputValueDef),")")},parseInputValueDef:function(e){var t=e.token;var r=this.parseDescription(e);var n=this.parseName(e);this.expect(e,":");var i=this.parseTypeReference(e);var a=null;if(this.skip(e,"=")){a=this.parseConstValue(e)}var s=this.parseDirectives(e,true);return{kind:"InputValueDefinition",description:r,name:n,type:i,defaultValue:a,directives:s,loc:this.loc(e,t)}},parseInterfaceTypeDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"interface");var n=this.parseName(e);var i=this.parseDirectives(e,true);var a=this.parseFieldsDefinition(e);return{kind:"InterfaceTypeDefinition",description:r,name:n,directives:i,fields:a,loc:this.loc(e,t)}},parseUnionTypeDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"union");var n=this.parseName(e);var i=this.parseDirectives(e,true);var a=this.parseUnionMemberTypes(e);return{kind:"UnionTypeDefinition",description:r,name:n,directives:i,types:a,loc:this.loc(e,t)}},parseUnionMemberTypes:function(e){var t=[];if(this.skip(e,"=")){this.skip(e,"|");while(true){t.push(this.parseNamedType(e));if(!this.skip(e,"|")){break}}}return t},parseEnumTypeDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"enum");var n=this.parseName(e);var i=this.parseDirectives(e,true);var a=this.parseEnumValuesDefinition(e);return{kind:"EnumTypeDefinition",description:r,name:n,directives:i,values:a,loc:this.loc(e,t)}},parseEnumValuesDefinition:function(e){if(this.peek(e,"{")){return this.many(e,"{",B(this,this.parseEnumValueDefinition),"}")}else{return[]}},parseEnumValueDefinition:function(e){var t=e.token;var r=this.parseDescription(e);var n=this.parseName(e);var i=this.parseDirectives(e,true);return{kind:"EnumValueDefinition",description:r,name:n,directives:i,loc:this.loc(e,t)}},parseInputObjectTypeDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"input");var n=this.parseName(e);var i=this.parseDirectives(e,true);var a=this.parseInputFieldsDefinition(e);return{kind:"InputObjectTypeDefinition",description:r,name:n,directives:i,fields:a,loc:this.loc(e,t)}},parseInputFieldsDefinition:function(e){if(this.peek(e,"{")){return this.many(e,"{",B(this,this.parseInputValueDef),"}")}else{return[]}},parseTypeExtension:function(e){var t=e.lookahead();if(t.kind=="Name"){var r=t.value;switch(r){case"enum":return this.parseEnumTypeExtension(e);case"input":return this.parseInputObjectTypeExtension(e);case"interface":return this.parseInterfaceTypeExtension(e);case"scalar":return this.parseScalarTypeExtension(e);case"type":return this.parseObjectTypeExtension(e);case"union":return this.parseUnionTypeExtension(e)}}throw new j(this.unexpected(e,t))},parseScalarTypeExtension:function(e){var t=e.token;this.expectKeyword(e,"extend");this.expectKeyword(e,"scalar");var r=this.parseName(e);var n=this.parseDirectives(e,true);if(n.length==0){throw new j(this.unexpected(e))}return{kind:"ScalarTypeExtension",name:r,directives:n,loc:this.loc(e,t)}},parseObjectTypeExtension:function(e){var t=e.token;this.expectKeyword(e,"extend");this.expectKeyword(e,"type");var r=this.parseName(e);var n=this.parseImplementsInterfaces(e);var i=this.parseDirectives(e,true);var a=this.parseFieldsDefinition(e);if(n.length==0&&i.length==0&&a.length==0){throw new j(this.unexpected(e))}return{kind:"ObjectTypeExtension",name:r,interfaces:n,directives:i,fields:a,loc:this.loc(e,t)}},parseInterfaceTypeExtension:function(e){var t=e.token;this.expectKeyword(e,"extend");this.expectKeyword(e,"interface");var r=this.parseName(e);var n=this.parseDirectives(e,true);var i=this.parseFieldsDefinition(e);if(n.length==0&&i.length==0){throw new j(this.unexpected(e))}return{kind:"InterfaceTypeExtension",name:r,directives:n,fields:i,loc:this.loc(e,t)}},parseUnionTypeExtension:function(e){var t=e.token;this.expectKeyword(e,"extend");this.expectKeyword(e,"union");var r=this.parseName(e);var n=this.parseDirectives(e,true);var i=this.parseUnionMemberTypes(e);if(n.length==0&&i.length==0){throw new j(this.unexpected(e))}return{kind:"UnionTypeExtension",name:r,directives:n,types:i,loc:this.loc(e,t)}},parseEnumTypeExtension:function(e){var t=e.token;this.expectKeyword(e,"extend");this.expectKeyword(e,"enum");var r=this.parseName(e);var n=this.parseDirectives(e,true);var i=this.parseEnumValuesDefinition(e);if(n.length==0&&i.length==0){throw new j(this.unexpected(e))}return{kind:"EnumTypeExtension",name:r,directives:n,values:i,loc:this.loc(e,t)}},parseInputObjectTypeExtension:function(e){var t=e.token;this.expectKeyword(e,"extend");this.expectKeyword(e,"input");var r=this.parseName(e);var n=this.parseDirectives(e,true);var i=this.parseInputFieldsDefinition(e);if(n.length==0&&i.length==0){throw new j(this.unexpected(e))}return{kind:"InputObjectTypeExtension",name:r,directives:n,fields:i,loc:this.loc(e,t)}},parseDirectiveDefinition:function(e){var t=e.token;var r=this.parseDescription(e);this.expectKeyword(e,"directive");this.expect(e,"@");var n=this.parseName(e);var i=this.parseArgumentDefs(e);this.expectKeyword(e,"on");var a=this.parseDirectiveLocations(e);return{kind:"DirectiveDefinition",description:r,name:n,arguments:i,locations:a,loc:this.loc(e,t)}},parseDirectiveLocations:function(e){this.skip(e,"|");var t=[];while(true){t.push(this.parseDirectiveLocation(e));if(!this.skip(e,"|")){break}}return t},parseDirectiveLocation:function(e){var t=e.token;var r=this.parseName(e);var n=y.ValidDirectiveLocations;var i=r.value;if(J[i]!=null?n.getReserved(i):n.h[i]){return r}throw new j(this.unexpected(e,t))},peek:function(e,t){return e.token.kind==t},skip:function(e,t){var r=e.token.kind==t;if(r){e.advance()}return r},expect:function(e,t){var r=e.token;if(r.kind==t){e.advance();return r}throw new j(this.syntaxError(e.source,e.line,e.lineStart,r.start,"Expected "+t+", found "+this.getTokenDesc(r)))},expectKeyword:function(e,t){var r=e.token;if(r.kind=="Name"&&r.value==t){e.advance();return r}throw new j(this.syntaxError(e.source,e.line,e.lineStart,r.start,'Expected "'+t+'", found '+this.getTokenDesc(r)))},unexpected:function(e,t){var r=t!=null?t:e.token;return this.syntaxError(e.source,e.line,e.lineStart,r.start,"Unexpected "+this.getTokenDesc(r))},any:function(e,t,r,n){this.expect(e,t);var i=[];while(!this.skip(e,n))i.push(r(e));return i},many:function(e,t,r,n){this.expect(e,t);var i=[r(e)];while(!this.skip(e,n))i.push(r(e));return i},loc:function(e,t){if(e.options!=null&&e.options.noLocation){return null}return{start:t.start,end:e.lastToken.end,startToken:t,endToken:e.lastToken,source:e.source}},syntaxError:function(e,t,r,n,i){return S.syntaxError(e,t,r,n,i)},getTokenDesc:function(e){return e.kind},__class__:y};var E=function(e,t,r,n,i){this.file=e;this.min=t;this.max=r;this.line=n;this.col=i};E.__name__=true;E.prototype={__class__:E};var k=function(e,t){this.message=e;this.pos=t};k.__name__=true;k.prototype={__class__:k};var S=function(e,t,r){if(r==null){r="Untitled"}var n=new y;if(t==null){t={}}var i=m.createLexer(b.ofString(e),t);try{this.document=n.parseDocument(i)}catch(a){if(a instanceof j)a=a.val;if(U.__instanceof(a,k)){var s=a.pos!=null?""+a.pos.line+": characters "+a.pos.col+"-"+(a.pos.col+(a.pos.max-a.pos.min+1)):"";throw new j(""+r+":"+s+" Error: "+a.message)}else throw a}};S.__name__=true;S.syntaxError=function(e,t,r,n,i){var a=n-r;var s=i;return new k(s,new E(null,n,n,t,a))};S.prototype={__class__:S};var T=function(e,t,r){this.string=e;this.start=t;this.end=r;if((this.length=r-t)<0){this.length=0;this.end=this.start}};T.__name__=true;T.prototype={toString:function(){if(this.representation==null){this.representation=this.string.substring(this.start,this.end)}return this.representation},__class__:T};var b={};b.__name__=true;b._new=function(e,t,r){var n=new T(e,t==e.length?t:t<0?t%e.length+e.length:t%e.length,r==e.length?r:r<0?r%e.length+e.length:r%e.length);return n};b.clamp=function(e,t){if(t<0){if(-t>e.length){return 0}else{return t+e.length}}else if(t>e.length){return e.length}else{return t}};b.wrap=function(e,t){if(e.length==0){return 0}else if(t<0){return t%e.length+e.length}else{return t%e.length}};b.ofString=function(e){if(e==null||e==""){return b.EMPTY}else if(e.length==1){var t=e.charCodeAt(0);var r=t;if(r<b.CHARS.length){return b.CHARS[r]}else{return new T(e,0,e.length)}}else{return new T(e,0,e.length)}};var x=function(){};x.__name__=true;var w=function(){this.h={}};w.__name__=true;w.__interfaces__=[x];w.prototype={setReserved:function(e,t){if(this.rh==null){this.rh={}}this.rh["$"+e]=t},getReserved:function(e){if(this.rh==null){return null}else{return this.rh["$"+e]}},existsReserved:function(e){if(this.rh==null){return false}return this.rh.hasOwnProperty("$"+e)},remove:function(e){if(J[e]!=null){e="$"+e;if(this.rh==null||!this.rh.hasOwnProperty(e)){return false}delete this.rh[e];return true}else{if(!this.h.hasOwnProperty(e)){return false;
}delete this.h[e];return true}},keys:function(){return a.iter(this.arrayKeys())},arrayKeys:function(){var e=[];for(var t in this.h){if(this.h.hasOwnProperty(t)){e.push(t)}}if(this.rh!=null){for(var t in this.rh){if(t.charCodeAt(0)==36){e.push(t.substr(1))}}}return e},__class__:w};var O={__ename__:true,__constructs__:["CInt","CFloat","CString","CIdent","CRegexp"]};O.CInt=function(e){var t=["CInt",0,e];t.__enum__=O;t.toString=r;return t};O.CFloat=function(e){var t=["CFloat",1,e];t.__enum__=O;t.toString=r;return t};O.CString=function(e){var t=["CString",2,e];t.__enum__=O;t.toString=r;return t};O.CIdent=function(e){var t=["CIdent",3,e];t.__enum__=O;t.toString=r;return t};O.CRegexp=function(e,t){var n=["CRegexp",4,e,t];n.__enum__=O;n.toString=r;return n};var D={__ename__:true,__constructs__:["OpAdd","OpMult","OpDiv","OpSub","OpAssign","OpEq","OpNotEq","OpGt","OpGte","OpLt","OpLte","OpAnd","OpOr","OpXor","OpBoolAnd","OpBoolOr","OpShl","OpShr","OpUShr","OpMod","OpAssignOp","OpInterval","OpArrow"]};D.OpAdd=["OpAdd",0];D.OpAdd.toString=r;D.OpAdd.__enum__=D;D.OpMult=["OpMult",1];D.OpMult.toString=r;D.OpMult.__enum__=D;D.OpDiv=["OpDiv",2];D.OpDiv.toString=r;D.OpDiv.__enum__=D;D.OpSub=["OpSub",3];D.OpSub.toString=r;D.OpSub.__enum__=D;D.OpAssign=["OpAssign",4];D.OpAssign.toString=r;D.OpAssign.__enum__=D;D.OpEq=["OpEq",5];D.OpEq.toString=r;D.OpEq.__enum__=D;D.OpNotEq=["OpNotEq",6];D.OpNotEq.toString=r;D.OpNotEq.__enum__=D;D.OpGt=["OpGt",7];D.OpGt.toString=r;D.OpGt.__enum__=D;D.OpGte=["OpGte",8];D.OpGte.toString=r;D.OpGte.__enum__=D;D.OpLt=["OpLt",9];D.OpLt.toString=r;D.OpLt.__enum__=D;D.OpLte=["OpLte",10];D.OpLte.toString=r;D.OpLte.__enum__=D;D.OpAnd=["OpAnd",11];D.OpAnd.toString=r;D.OpAnd.__enum__=D;D.OpOr=["OpOr",12];D.OpOr.toString=r;D.OpOr.__enum__=D;D.OpXor=["OpXor",13];D.OpXor.toString=r;D.OpXor.__enum__=D;D.OpBoolAnd=["OpBoolAnd",14];D.OpBoolAnd.toString=r;D.OpBoolAnd.__enum__=D;D.OpBoolOr=["OpBoolOr",15];D.OpBoolOr.toString=r;D.OpBoolOr.__enum__=D;D.OpShl=["OpShl",16];D.OpShl.toString=r;D.OpShl.__enum__=D;D.OpShr=["OpShr",17];D.OpShr.toString=r;D.OpShr.__enum__=D;D.OpUShr=["OpUShr",18];D.OpUShr.toString=r;D.OpUShr.__enum__=D;D.OpMod=["OpMod",19];D.OpMod.toString=r;D.OpMod.__enum__=D;D.OpAssignOp=function(e){var t=["OpAssignOp",20,e];t.__enum__=D;t.toString=r;return t};D.OpInterval=["OpInterval",21];D.OpInterval.toString=r;D.OpInterval.__enum__=D;D.OpArrow=["OpArrow",22];D.OpArrow.toString=r;D.OpArrow.__enum__=D;var N={__ename__:true,__constructs__:["OpIncrement","OpDecrement","OpNot","OpNeg","OpNegBits"]};N.OpIncrement=["OpIncrement",0];N.OpIncrement.toString=r;N.OpIncrement.__enum__=N;N.OpDecrement=["OpDecrement",1];N.OpDecrement.toString=r;N.OpDecrement.__enum__=N;N.OpNot=["OpNot",2];N.OpNot.toString=r;N.OpNot.__enum__=N;N.OpNeg=["OpNeg",3];N.OpNeg.toString=r;N.OpNeg.__enum__=N;N.OpNegBits=["OpNegBits",4];N.OpNegBits.toString=r;N.OpNegBits.__enum__=N;var A={__ename__:true,__constructs__:["EConst","EArray","EBinop","EField","EParenthesis","EObjectDecl","EArrayDecl","ECall","ENew","EUnop","EVars","EFunction","EBlock","EFor","EIn","EIf","EWhile","ESwitch","ETry","EReturn","EBreak","EContinue","EUntyped","EThrow","ECast","EDisplay","EDisplayNew","ETernary","ECheckType","EMeta"]};A.EConst=function(e){var t=["EConst",0,e];t.__enum__=A;t.toString=r;return t};A.EArray=function(e,t){var n=["EArray",1,e,t];n.__enum__=A;n.toString=r;return n};A.EBinop=function(e,t,n){var i=["EBinop",2,e,t,n];i.__enum__=A;i.toString=r;return i};A.EField=function(e,t){var n=["EField",3,e,t];n.__enum__=A;n.toString=r;return n};A.EParenthesis=function(e){var t=["EParenthesis",4,e];t.__enum__=A;t.toString=r;return t};A.EObjectDecl=function(e){var t=["EObjectDecl",5,e];t.__enum__=A;t.toString=r;return t};A.EArrayDecl=function(e){var t=["EArrayDecl",6,e];t.__enum__=A;t.toString=r;return t};A.ECall=function(e,t){var n=["ECall",7,e,t];n.__enum__=A;n.toString=r;return n};A.ENew=function(e,t){var n=["ENew",8,e,t];n.__enum__=A;n.toString=r;return n};A.EUnop=function(e,t,n){var i=["EUnop",9,e,t,n];i.__enum__=A;i.toString=r;return i};A.EVars=function(e){var t=["EVars",10,e];t.__enum__=A;t.toString=r;return t};A.EFunction=function(e,t){var n=["EFunction",11,e,t];n.__enum__=A;n.toString=r;return n};A.EBlock=function(e){var t=["EBlock",12,e];t.__enum__=A;t.toString=r;return t};A.EFor=function(e,t){var n=["EFor",13,e,t];n.__enum__=A;n.toString=r;return n};A.EIn=function(e,t){var n=["EIn",14,e,t];n.__enum__=A;n.toString=r;return n};A.EIf=function(e,t,n){var i=["EIf",15,e,t,n];i.__enum__=A;i.toString=r;return i};A.EWhile=function(e,t,n){var i=["EWhile",16,e,t,n];i.__enum__=A;i.toString=r;return i};A.ESwitch=function(e,t,n){var i=["ESwitch",17,e,t,n];i.__enum__=A;i.toString=r;return i};A.ETry=function(e,t){var n=["ETry",18,e,t];n.__enum__=A;n.toString=r;return n};A.EReturn=function(e){var t=["EReturn",19,e];t.__enum__=A;t.toString=r;return t};A.EBreak=["EBreak",20];A.EBreak.toString=r;A.EBreak.__enum__=A;A.EContinue=["EContinue",21];A.EContinue.toString=r;A.EContinue.__enum__=A;A.EUntyped=function(e){var t=["EUntyped",22,e];t.__enum__=A;t.toString=r;return t};A.EThrow=function(e){var t=["EThrow",23,e];t.__enum__=A;t.toString=r;return t};A.ECast=function(e,t){var n=["ECast",24,e,t];n.__enum__=A;n.toString=r;return n};A.EDisplay=function(e,t){var n=["EDisplay",25,e,t];n.__enum__=A;n.toString=r;return n};A.EDisplayNew=function(e){var t=["EDisplayNew",26,e];t.__enum__=A;t.toString=r;return t};A.ETernary=function(e,t,n){var i=["ETernary",27,e,t,n];i.__enum__=A;i.toString=r;return i};A.ECheckType=function(e,t){var n=["ECheckType",28,e,t];n.__enum__=A;n.toString=r;return n};A.EMeta=function(e,t){var n=["EMeta",29,e,t];n.__enum__=A;n.toString=r;return n};var C={__ename__:true,__constructs__:["TPath","TFunction","TAnonymous","TParent","TExtend","TOptional"]};C.TPath=function(e){var t=["TPath",0,e];t.__enum__=C;t.toString=r;return t};C.TFunction=function(e,t){var n=["TFunction",1,e,t];n.__enum__=C;n.toString=r;return n};C.TAnonymous=function(e){var t=["TAnonymous",2,e];t.__enum__=C;t.toString=r;return t};C.TParent=function(e){var t=["TParent",3,e];t.__enum__=C;t.toString=r;return t};C.TExtend=function(e,t){var n=["TExtend",4,e,t];n.__enum__=C;n.toString=r;return n};C.TOptional=function(e){var t=["TOptional",5,e];t.__enum__=C;t.toString=r;return t};var I={__ename__:true,__constructs__:["TPType","TPExpr"]};I.TPType=function(e){var t=["TPType",0,e];t.__enum__=I;t.toString=r;return t};I.TPExpr=function(e){var t=["TPExpr",1,e];t.__enum__=I;t.toString=r;return t};var F={__ename__:true,__constructs__:["APublic","APrivate","AStatic","AOverride","ADynamic","AInline","AMacro"]};F.APublic=["APublic",0];F.APublic.toString=r;F.APublic.__enum__=F;F.APrivate=["APrivate",1];F.APrivate.toString=r;F.APrivate.__enum__=F;F.AStatic=["AStatic",2];F.AStatic.toString=r;F.AStatic.__enum__=F;F.AOverride=["AOverride",3];F.AOverride.toString=r;F.AOverride.__enum__=F;F.ADynamic=["ADynamic",4];F.ADynamic.toString=r;F.ADynamic.__enum__=F;F.AInline=["AInline",5];F.AInline.toString=r;F.AInline.__enum__=F;F.AMacro=["AMacro",6];F.AMacro.toString=r;F.AMacro.__enum__=F;var R={__ename__:true,__constructs__:["FVar","FFun","FProp"]};R.FVar=function(e,t){var n=["FVar",0,e,t];n.__enum__=R;n.toString=r;return n};R.FFun=function(e){var t=["FFun",1,e];t.__enum__=R;t.toString=r;return t};R.FProp=function(e,t,n,i){var a=["FProp",2,e,t,n,i];a.__enum__=R;a.toString=r;return a};var P={__ename__:true,__constructs__:["TDEnum","TDStructure","TDClass","TDAlias","TDAbstract"]};P.TDEnum=["TDEnum",0];P.TDEnum.toString=r;P.TDEnum.__enum__=P;P.TDStructure=["TDStructure",1];P.TDStructure.toString=r;P.TDStructure.__enum__=P;P.TDClass=function(e,t,n){var i=["TDClass",2,e,t,n];i.__enum__=P;i.toString=r;return i};P.TDAlias=function(e){var t=["TDAlias",3,e];t.__enum__=P;t.toString=r;return t};P.TDAbstract=function(e,t,n){var i=["TDAbstract",4,e,t,n];i.__enum__=P;i.toString=r;return i};var j=function(e){Error.call(this);this.val=e;this.message=String(e);if(Error.captureStackTrace){Error.captureStackTrace(this,j)}};j.__name__=true;j.wrap=function(e){if(e instanceof Error){return e}else{return new j(e)}};j.__super__=Error;j.prototype=n(Error.prototype,{__class__:j});var U=function(){};U.__name__=true;U.getClass=function(e){if(e instanceof Array&&e.__enum__==null){return Array}else{var t=e.__class__;if(t!=null){return t}var r=U.__nativeClassName(e);if(r!=null){return U.__resolveNativeClass(r)}return null}};U.__string_rec=function(e,t){if(e==null){return"null"}if(t.length>=5){return"<...>"}var r=typeof e;if(r=="function"&&(e.__name__||e.__ename__)){r="object"}switch(r){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2){return e[0]}var n=e[0]+"(";t+="	";var i=2;var a=e.length;while(i<a){var s=i++;if(s!=2){n+=","+U.__string_rec(e[s],t)}else{n+=U.__string_rec(e[s],t)}}return n+")"}var o=e.length;var u;var l="[";t+="	";var p=0;var c=o;while(p<c){var h=p++;l+=(h>0?",":"")+U.__string_rec(e[h],t)}l+="]";return l}var _;try{_=e.toString}catch(f){return"???"}if(_!=null&&_!=Object.toString&&typeof _=="function"){var v=e.toString();if(v!="[object Object]"){return v}}var d=null;var m="{\n";t+="	";var g=e.hasOwnProperty!=null;for(var d in e){if(g&&!e.hasOwnProperty(d)){continue}if(d=="prototype"||d=="__class__"||d=="__super__"||d=="__interfaces__"||d=="__properties__"){continue}if(m.length!=2){m+=", \n"}m+=t+d+" : "+U.__string_rec(e[d],t)}t=t.substring(1);m+="\n"+t+"}";return m;case"string":return e;default:return String(e)}};U.__interfLoop=function(e,t){if(e==null){return false}if(e==t){return true}var r=e.__interfaces__;if(r!=null){var n=0;var i=r.length;while(n<i){var a=n++;var s=r[a];if(s==t||U.__interfLoop(s,t)){return true}}}return U.__interfLoop(e.__super__,t)};U.__instanceof=function(e,t){if(t==null){return false}switch(t){case Array:if(e instanceof Array){return e.__enum__==null}else{return false}break;case X:return typeof e=="boolean";case G:return true;case K:return typeof e=="number";case q:if(typeof e=="number"){return(e|0)===e}else{return false}break;case String:return typeof e=="string";default:if(e!=null){if(typeof t=="function"){if(e instanceof t){return true}if(U.__interfLoop(U.getClass(e),t)){return true}}else if(typeof t=="object"&&U.__isNativeObj(t)){if(e instanceof t){return true}}}else{return false}if(t==W?e.__name__!=null:false){return true}if(t==H?e.__ename__!=null:false){return true}return e.__enum__==t}};U.__nativeClassName=function(e){var t=U.__toStr.call(e).slice(8,-1);if(t=="Object"||t=="Function"||t=="Math"||t=="JSON"){return null}return t};U.__isNativeObj=function(e){return U.__nativeClassName(e)!=null};U.__resolveNativeClass=function(e){return t[e]};function L(e){if(e instanceof Array)return function(){return a.iter(e)};return typeof e.iterator=="function"?B(e,e.iterator):e.iterator}var V,M=0;function B(e,t){if(t==null)return null;if(t.__id__==null)t.__id__=M++;var r;if(e.hx__closures__==null)e.hx__closures__={};else r=e.hx__closures__[t.__id__];if(r==null){r=function(){return r.method.apply(r.scope,arguments)};r.scope=e;r.method=t;e.hx__closures__[t.__id__]=r}return r}String.prototype.__class__=String;String.__name__=true;Array.__name__=true;var q={__name__:["Int"]};var G={__name__:["Dynamic"]};var K=Number;K.__name__=["Float"];var X=Boolean;X.__ename__=["Bool"];var W={__name__:["Class"]};var H={};var J={};c.OP_PREFIX="OP_";c.OP_OUTER_SUFFIX="_Result";c.OP_INNER_SUFFIX="_InnerResult";c.OP_VARS_SUFFIX="_Vars";c.FRAGMENT_PREFIX="Fragment_";c.ARGS_PREFIX="Args_";c.GENERATED_UNION_PREFIX="U_";c._basic_types=["ID","String","Float","Int","Boolean"];v.bool_collision=false;v.FAKE_POS={min:0,max:0,file:"Untitled"};y.ValidDirectiveLocations=function(e){var t;var r=new w;if(J["QUERY"]!=null){r.setReserved("QUERY",true)}else{r.h["QUERY"]=true}if(J["MUTATION"]!=null){r.setReserved("MUTATION",true)}else{r.h["MUTATION"]=true}if(J["SUBSCRIPTION"]!=null){r.setReserved("SUBSCRIPTION",true)}else{r.h["SUBSCRIPTION"]=true}if(J["FIELD"]!=null){r.setReserved("FIELD",true)}else{r.h["FIELD"]=true}if(J["FRAGMENT_DEFINITION"]!=null){r.setReserved("FRAGMENT_DEFINITION",true)}else{r.h["FRAGMENT_DEFINITION"]=true}if(J["FRAGMENT_SPREAD"]!=null){r.setReserved("FRAGMENT_SPREAD",true)}else{r.h["FRAGMENT_SPREAD"]=true}if(J["INLINE_FRAGMENT"]!=null){r.setReserved("INLINE_FRAGMENT",true)}else{r.h["INLINE_FRAGMENT"]=true}if(J["SCHEMA"]!=null){r.setReserved("SCHEMA",true)}else{r.h["SCHEMA"]=true}if(J["SCALAR"]!=null){r.setReserved("SCALAR",true)}else{r.h["SCALAR"]=true}if(J["OBJECT"]!=null){r.setReserved("OBJECT",true)}else{r.h["OBJECT"]=true}if(J["FIELD_DEFINITION"]!=null){r.setReserved("FIELD_DEFINITION",true)}else{r.h["FIELD_DEFINITION"]=true}if(J["ARGUMENT_DEFINITION"]!=null){r.setReserved("ARGUMENT_DEFINITION",true)}else{r.h["ARGUMENT_DEFINITION"]=true}if(J["INTERFACE"]!=null){r.setReserved("INTERFACE",true)}else{r.h["INTERFACE"]=true}if(J["UNION"]!=null){r.setReserved("UNION",true)}else{r.h["UNION"]=true}if(J["ENUM"]!=null){r.setReserved("ENUM",true)}else{r.h["ENUM"]=true}if(J["ENUM_VALUE"]!=null){r.setReserved("ENUM_VALUE",true)}else{r.h["ENUM_VALUE"]=true}if(J["INPUT_OBJECT"]!=null){r.setReserved("INPUT_OBJECT",true)}else{r.h["INPUT_OBJECT"]=true}if(J["INPUT_FIELD_DEFINITION"]!=null){r.setReserved("INPUT_FIELD_DEFINITION",true)}else{r.h["INPUT_FIELD_DEFINITION"]=true}t=r;return t}(this);b.CHARS=function(e){var t;var r=[];{var n=0;while(n<128){var i=n++;r.push(new T(String.fromCharCode(i),0,1))}}t=r;return t}(this);b.EMPTY=new T("",0,0);U.__toStr={}.toString;i.main()})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);
