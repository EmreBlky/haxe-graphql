(function(e,t){"use strict";e["graphql"]=e["graphql"]||{};var r=function(){return S.__string_rec(this,"")};function i(e,t){function r(){}r.prototype=e;var i=new r;for(var s in t)i[s]=t[s];if(t.toString!==Object.prototype.toString)i.toString=t.toString;return i}var s={};s.__name__=true;s._new=function(){var e;return new y};var n=e["Demo"]=function(){};n.__name__=true;n.main=function(){};n.parse=function(e){var t=new d(e);return t.document};n.hxgen=function(e){return l.parse(e)};var a=function(){};a.__name__=true;a.cca=function(e,t){var r=e.charCodeAt(t);if(r!=r){return undefined}return r};a.iter=function(e){return{cur:0,arr:e,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var u=function(e,t){this.min=e;this.max=t};u.__name__=true;u.prototype={__class__:u};Math.__name__=true;var o=function(){};o.__name__=true;o.string=function(e){return S.__string_rec(e,"")};var l=e["graphql"]["HaxeGenerator"]=function(e){this.defined_types=[];this.referenced_types=[];this._interfaces=s._new();this._stdout_writer=new h;this._stderr_writer=new h;this.init_options(e)};l.__name__=true;l.parse=function(e,t){var r=new l(t);if(!r._stderr_writer.is_empty()){return{stdout:"",stderr:r._stderr_writer.toString()}}return r.parse_document(e)};l.prototype={init_options:function(e){this._options=e==null?{}:e;if(this._options.generate==null){this._options.generate="typedefs"}if(this._options.disable_null_wrappers==null){this._options.disable_null_wrappers=false}},parse_document:function(e){var t=this;this.init_base_types();var r=function(){t._stdout_writer.append("")};var i=0;var s=e.definitions;while(i<s.length){var n=s[i];++i;var a=n.kind;if(a=="InterfaceTypeDefinition"){this.write_interface_as_haxe_base_typedef(n);r()}}var u=0;var l=e.definitions;while(u<l.length){var h=l[u];++u;var f=h.kind;switch(f){case"EnumTypeDefinition":this.write_haxe_enum(h);r();break;case"InterfaceTypeDefinition":break;case"ObjectTypeDefinition":this.write_haxe_typedef(h);r();break;case"ScalarTypeDefinition":this.write_haxe_scalar(h);r();break;case"UnionTypeDefinition":this.write_union_as_haxe_abstract(h);r();break;default:var c=h.name?" - "+o.string(h.name.value):"";this.error("Error: unknown / unsupported definition kind: "+o.string(h.kind)+c)}}return{stderr:this._stderr_writer.toString(),stdout:this._stdout_writer.toString()}},error:function(e){this._stderr_writer.append(e)},type_referenced:function(e){if(this.referenced_types.indexOf(e)<0){this.referenced_types.push(e)}},type_defined:function(e){if(this.defined_types.indexOf(e)<0){this.defined_types.push(e)}},parse_type:function(e,t){var r=e.kind=="ListType";var i=e.kind=="NonNullType";var s=i||r;var n=i?false:t==null||t.kind!="NonNullType";var a=new f(null,false,"","");if(!s){if(e.name==null){throw new k("Expecting type.name!")}if(e.type!=null){throw new k("Not expecting recursive type!")}if(e.kind!="NamedType"){throw new k("Expecting NamedType!")}this.type_referenced(e.name.value);a.optional=n;a.child=w.Right(e.name.value)}else{if(e.type==null){throw new k("Expecting recursive / wrapped type!")}a.optional=n;if(r){a.prefix+="Array<";a.suffix+=">"}a.child=w.Left(this.parse_type(e.type,e))}return a},type0_equal_to_type1:function(e,t){return e.toString(true)==t.toString(true)},write_haxe_typedef:function(e){var t=true;this._stdout_writer.append("typedef "+e.name.value+" = {");var r=s._new();var i=s._new();if(e.interfaces!=null){var n=0;var a=e.interfaces;while(n<a.length){var u=a[n];++n;var o=u.name.value;var l=this._interfaces;if(!(D[o]!=null?l.existsReserved(o):l.h.hasOwnProperty(o))){throw new k("Requested interface "+o+" (implemented by "+e.name.value+") not found")}var h=this._interfaces;var f=D[o]!=null?h.getReserved(o):h.h[o];this._stdout_writer.append("  /* implements interface */ > "+o+",");var c=f.keys();while(c.hasNext()){var p=c.next();if(!(D[p]!=null?i.existsReserved(p):i.h.hasOwnProperty(p))){var _=D[p]!=null?f.getReserved(p):f.h[p];if(D[p]!=null){i.setReserved(p,_)}else{i.h[p]=_}if(D[p]!=null){r.setReserved(p,o)}else{r.h[p]=o}}else if(!this.type0_equal_to_type1(D[p]!=null?f.getReserved(p):f.h[p],D[p]!=null?i.getReserved(p):i.h[p])){throw new k("Type "+e.name.value+" inherits field "+p+" from multiple interfaces ("+o+", "+(D[p]!=null?r.getReserved(p):r.h[p])+"), the types of which do not match.")}}}}this.type_defined(e.name.value);var v=0;var d=e.fields;while(v<d.length){var g=d[v];++v;var m=this.parse_type(g.type);var w=g.name.value;if(D[w]!=null?i.existsReserved(w):i.h.hasOwnProperty(w)){if(!this.type0_equal_to_type1(m,D[w]!=null?i.getReserved(w):i.h[w])){throw new k("Type "+e.name.value+" defines "+w+":"+m.toString(true)+", but Interface "+(D[w]!=null?r.getReserved(w):r.h[w])+" requires "+w+":"+(D[w]!=null?r.getReserved(w):r.h[w]).toString())}}else{var y="";var S=m.optional;m.optional=false;if(t){y=(S?"?":"")+w+": "+m.toString(this._options.disable_null_wrappers==true)+","}else{y=(S?"@:optional":"")+"var "+w+": "+m.toString(this._options.disable_null_wrappers==true)+";"}this._stdout_writer.append("  "+y)}}if(t){this._stdout_writer.chomp_trailing_comma()}this._stdout_writer.append("}")},write_interface_as_haxe_base_typedef:function(e){if(e.name==null||e.name.value==null){throw new k("Expecting interface must have a name")}var t=e.name.value;var r=this._interfaces;if(D[t]!=null?r.existsReserved(t):r.h.hasOwnProperty(t)){throw new k("Duplicate interface named "+t)}var i=s._new();var n=0;var a=e.fields;while(n<a.length){var u=a[n];++n;var o=this.parse_type(u.type);var l=u.name.value;if(D[l]!=null){i.setReserved(l,o)}else{i.h[l]=o}}var h=this._interfaces;if(D[t]!=null){h.setReserved(t,i)}else{h.h[t]=i}this.write_haxe_typedef(e)},write_haxe_enum:function(e){this.type_defined(e.name.value);this._stdout_writer.append("enum "+e.name.value+" {");var t=0;var r=e.values;while(t<r.length){var i=r[t];++t;this._stdout_writer.append("  "+i.name.value+";")}this._stdout_writer.append("}")},write_haxe_scalar:function(e){this.type_defined(e.name.value);this._stdout_writer.append("/* scalar "+e.name.value+" */\nabstract "+e.name.value+"(Dynamic) { }")},write_union_as_haxe_abstract:function(e){this.type_defined(e.name.value);this._stdout_writer.append("/* union "+e.name.value+(" = "+e.types.map(function(e){return e.name.value}).join(" | ")+" */"));this._stdout_writer.append("abstract "+e.name.value+"(Dynamic) {");var t=0;var r=e.types;while(t<r.length){var i=r[t];++t;if(i.name==null){throw new k("Expecting Named Type")}var s=i.name.value;this.type_referenced(e.name.value);this._stdout_writer.append(" @:from static function from"+s+"(v:"+s+") return cast v;")}this._stdout_writer.append("}")},init_base_types:function(){this._stdout_writer.append("/* - - - - Haxe / GraphQL compatibility types - - - - */");this._stdout_writer.append("abstract IDString(String) to String {\n  // Strict safety -- require explicit fromString");this._stdout_writer.append("  public static inline function fromString(s:String) return cast s;");this._stdout_writer.append("  public static inline function ofString(s:String) return cast s;");this._stdout_writer.append("}");this._stdout_writer.append("typedef ID = IDString;");this.type_defined("ID");this.type_defined("String");this.type_defined("Float");this.type_defined("Int");this._stdout_writer.append("typedef Boolean = Bool;");this.type_defined("Boolean");this._stdout_writer.append("/* - - - - - - - - - - - - - - - - - - - - - - - - - */\n\n")},__class__:l};var h=function(){this._output=[]};h.__name__=true;h.prototype={is_empty:function(){return this._output.length==0},append:function(e){this._output.push(e)},chomp_trailing_comma:function(){var e=this._output;var t=this._output.length-1;var r=new RegExp(",$","".split("u").join(""));e[t]=this._output[this._output.length-1].replace(r,"")},toString:function(){return this._output.join("\n")},__class__:h};var f=function(e,t,r,i){if(i==null){i=""}if(r==null){r=""}if(t==null){t=false}this.child=e;this.prefix=r;this.suffix=i;this.optional=t};f.__name__=true;f.prototype={toString:function(e){if(e==null){e=false}var t=this.prefix;var r=this.child;var i;switch(r[1]){case 0:var s=r[2];i=s.toString(e);break;case 1:var n=r[2];i=n;break}var a=t+i+this.suffix;if(e&&this.optional){a="Null<"+a+">"}return a},__class__:f};var c=function(e,t,r){this.file=e;this.min=t;this.max=r};c.__name__=true;c.prototype={__class__:c};var p=function(e,t){this.message=e;this.pos=t};p.__name__=true;p.prototype={__class__:p};var _=function(e){this.source=e;this.max=e.length;this.pos=0};_.__name__=true;_.prototype={skipIgnored:function(){while(this.lastSkip!=this.pos){this.lastSkip=this.pos;this.doSkipIgnored()}this.lastSkip=this.pos;return null},doSkipIgnored:function(){},allow:function(e){var t=this.skipIgnored();return this.allowHere(e)},allowHere:function(e){if(E.hasSub(this.source,e,this.pos)){this.pos+=e.length;return true}else{return false}},expect:function(e){if(!this.allow(e)){this.die("expected "+e.toString())}return null},upto:function(e,t){var r=E.indexOf(this.source,e,this.pos);if(r==-1){var i="expected "+e.toString();var s=this.pos;return C.Failure(this.makeError(i,this.doMakePos(s,s+1)))}else{var n=r;var a=this.source;var u;var o;u=this.pos;o=n+(t?e.length:0);var l=E._new(a.string,E.wrap(a,u)+a.start,E.clamp(a,o)+a.start);this.pos=n+e.length;return C.Success(l)}},die:function(e,t){if(t==null){t=new u(this.pos,this.pos+1)}var r=t.min;var i=t.max;throw new k(this.makeError(e,this.doMakePos(r,i==null?r+1:i)))},makeError:function(e,t){throw new k("ni")},done:function(){this.skipIgnored();return this.pos>=this.max},doMakePos:function(e,t){throw new k("ni")},parseRepeatedly:function(e,t){if(t.start!=null&&!this.allow(t.start)){return}if(this.allow(t.end)){return}e();while(this.allow(t.sep)){if(t.allowTrailing&&this.allow(t.end)){return}e()}this.expect(t.end)},__class__:_};var v=function(){};v.__name__=true;var d=function(e,t){if(t==null){t="Untitled"}_.call(this,E.ofString(e));this._filename=t;try{this.document=this.readDocument()}catch(r){if(r instanceof k)r=r.val;if(S.__instanceof(r,p)){d.format_and_rethrow(this._filename,this.source,r)}else throw r}};d.__name__=true;d.format_and_rethrow=function(e,t,r){var i=1;var s=0;var n=0;var a=r.pos.min;while(n<a){var u=n++;if(t.string.charCodeAt(u+t.start)==10){s=u;++i}}var o=""+e+":"+i+": characters "+(r.pos.min-s)+"-"+(r.pos.max-s)+" Error: "+r.message;throw new k(o)};d.__super__=_;d.prototype=i(_.prototype,{readDocument:function(){var e=[];while(true){var t=v.WHITE;while(true){var r;if(this.pos<this.max){var i=this.source;var s=i.string.charCodeAt(this.pos+i.start);if(t!=null){r=t(s)}else{r=true}}else{r=false}if(!r){break}this.pos++}while(true){var n=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var a;if(this.pos<this.max){var u=this.source;var o=u.string.charCodeAt(this.pos+u.start);if(n!=null){a=n(o)}else{a=true}}else{a=false}if(a){this.upto(E.ofString("\n"))}else{break}var l=v.WHITE;while(true){var h;if(this.pos<this.max){var f=this.source;var c=f.string.charCodeAt(this.pos+f.start);if(l!=null){h=l(c)}else{h=true}}else{h=false}if(!h){break}this.pos++}}if(this.done()){break}var p=this.readDefinition();switch(p[1]){case 0:var _=p[2];e.push(_);break;case 1:var g=p[2];var m=this.pos;throw new k(this.makeError(g.message,this.doMakePos(m,m+1)));break}}return{definitions:e}},readDefinition:function(){var e=v.WHITE;while(true){var t;if(this.pos<this.max){var r=this.source;var i=r.string.charCodeAt(this.pos+r.start);if(e!=null){t=e(i)}else{t=true}}else{t=false}if(!t){break}this.pos++}while(true){var s=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var n;if(this.pos<this.max){var a=this.source;var u=a.string.charCodeAt(this.pos+a.start);if(s!=null){n=s(u)}else{n=true}}else{n=false}if(n){this.upto(E.ofString("\n"))}else{break}var o=v.WHITE;while(true){var l;if(this.pos<this.max){var h=this.source;var f=h.string.charCodeAt(this.pos+h.start);if(o!=null){l=o(f)}else{l=true}}else{l=false}if(!l){break}this.pos++}}var c=this.pos;var p;var _=this.ident(true);switch(_[1]){case 0:var g=_[2];if(E.equalsString(g,"type")){p=this.readTypeDefinition(c)}else{var m=_[2];if(E.equalsString(m,"interface")){p=this.readTypeDefinition(c,true)}else{var w=_[2];if(E.equalsString(w,"schema")){p=this.readTypeDefinition(c,false,true)}else{var y=_[2];if(E.equalsString(y,"enum")){p=this.readEnumDefinition(c)}else{var k=_[2];if(E.equalsString(k,"union")){p=this.readUnionDefinition(c)}else{var S=_[2];if(E.equalsString(S,"scalar")){p=this.readScalarDefinition(c)}else{var T=this.source;var x;var b;x=c;b=this.pos;p=C.Failure(this.makeError('Got "'+E._new(T.string,E.wrap(T,x)+T.start,E.clamp(T,b)+T.start).toString()+'", expecting keyword: type interface enum schema union',this.doMakePos(c,c+1)))}}}}}}break;case 1:var A=_[2];p=C.Failure(A);break}return p},readTypeDefinition:function(e,t,r){if(r==null){r=false}if(t==null){t=false}var i=this;var s={loc:{start:e,end:e,source:this._filename,startToken:null,endToken:null},kind:"ObjectTypeDefinition",name:null,fields:[]};if(t){s.kind="InterfaceTypeDefinition"}if(r){s.kind="SchemaDefinition"}var n=[];var a=v.WHITE;while(true){var u;if(this.pos<this.max){var o=this.source;var l=o.string.charCodeAt(this.pos+o.start);if(a!=null){u=a(l)}else{u=true}}else{u=false}if(!u){break}this.pos++}while(true){var h=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var f;if(this.pos<this.max){var c=this.source;var p=c.string.charCodeAt(this.pos+c.start);if(h!=null){f=h(p)}else{f=true}}else{f=false}if(f){this.upto(E.ofString("\n"))}else{break}var _=v.WHITE;while(true){var g;if(this.pos<this.max){var m=this.source;var w=m.string.charCodeAt(this.pos+m.start);if(_!=null){g=_(w)}else{g=true}}else{g=false}if(!g){break}this.pos++}}if(!r){var y=x.sure(this.ident()).toString();s.name=this.mkNameNode(y);var S=v.WHITE;while(true){var T;if(this.pos<this.max){var b=this.source;var A=b.string.charCodeAt(this.pos+b.start);if(S!=null){T=S(A)}else{T=true}}else{T=false}if(!T){break}this.pos++}while(true){var N=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var I;if(this.pos<this.max){var H=this.source;var R=H.string.charCodeAt(this.pos+H.start);if(N!=null){I=N(R)}else{I=true}}else{I=false}if(I){this.upto(E.ofString("\n"))}else{break}var M=v.WHITE;while(true){var D;if(this.pos<this.max){var O=this.source;var W=O.string.charCodeAt(this.pos+O.start);if(M!=null){D=M(W)}else{D=true}}else{D=false}if(!D){break}this.pos++}}}var F=null;if(this.allow(E.ofString("implements"))){if(t){var P=this.pos;return C.Failure(this.makeError("Interfaces cannot implement interfaces.",this.doMakePos(P,P+1)))}this.parseRepeatedly(function(){var e=i.ident();if(!x.isSuccess(e)){F=C.Failure(e.slice(2)[0]);return}var t=x.sure(e).toString();var r={kind:"NamedType",name:i.mkNameNode(t)};n.push(r)},{end:E.ofString("{"),sep:E.ofString("&"),allowTrailing:false})}else{this.expect(E.ofString("{"))}if(F!=null){return F}while(true){var q=this.readFieldDefinition();switch(q[1]){case 0:var j=q[2];s.fields.push(j);break;case 1:var L=q[2];return C.Failure(L)}if(this.allow(E.ofString("}"))){break}}s.loc.end=this.pos;var U=v.WHITE;while(true){var B;if(this.pos<this.max){var G=this.source;var $=G.string.charCodeAt(this.pos+G.start);if(U!=null){B=U($)}else{B=true}}else{B=false}if(!B){break}this.pos++}while(true){var K=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var Y;if(this.pos<this.max){var J=this.source;var Q=J.string.charCodeAt(this.pos+J.start);if(K!=null){Y=K(Q)}else{Y=true}}else{Y=false}if(Y){this.upto(E.ofString("\n"))}else{break}var z=v.WHITE;while(true){var V;if(this.pos<this.max){var X=this.source;var Z=X.string.charCodeAt(this.pos+X.start);if(z!=null){V=z(Z)}else{V=true}}else{V=false}if(!V){break}this.pos++}}if(t){var ee=s;return C.Success(ee)}else if(r){throw new k("SchemaDefinitionNode is not yet supported...")}else{var te={name:s.name,loc:s.loc,kind:s.kind,fields:s.fields,interfaces:n};return C.Success(te)}},mkNameNode:function(e){return{kind:"NamedType",value:e,loc:null}},readEnumDefinition:function(e){var t={loc:{start:e,end:this.pos,source:this._filename,startToken:null,endToken:null},kind:"EnumTypeDefinition",name:null,values:[]};var r=v.WHITE;while(true){var i;if(this.pos<this.max){var s=this.source;var n=s.string.charCodeAt(this.pos+s.start);if(r!=null){i=r(n)}else{i=true}}else{i=false}if(!i){break}this.pos++}while(true){var a=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var u;if(this.pos<this.max){var o=this.source;var l=o.string.charCodeAt(this.pos+o.start);if(a!=null){u=a(l)}else{u=true}}else{u=false}if(u){this.upto(E.ofString("\n"))}else{break}var h=v.WHITE;while(true){var f;if(this.pos<this.max){var c=this.source;var p=c.string.charCodeAt(this.pos+c.start);if(h!=null){f=h(p)}else{f=true}}else{f=false}if(!f){break}this.pos++}}var _=x.sure(this.ident()).toString();t.name=this.mkNameNode(_);var g=v.WHITE;while(true){var m;if(this.pos<this.max){var w=this.source;var y=w.string.charCodeAt(this.pos+w.start);if(g!=null){m=g(y)}else{m=true}}else{m=false}if(!m){break}this.pos++}while(true){var k=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var S;if(this.pos<this.max){var T=this.source;var b=T.string.charCodeAt(this.pos+T.start);if(k!=null){S=k(b)}else{S=true}}else{S=false}if(S){this.upto(E.ofString("\n"))}else{break}var A=v.WHITE;while(true){var N;if(this.pos<this.max){var I=this.source;var H=I.string.charCodeAt(this.pos+I.start);if(A!=null){N=A(H)}else{N=true}}else{N=false}if(!N){break}this.pos++}}this.expect(E.ofString("{"));while(true){var R=v.WHITE;while(true){var M;if(this.pos<this.max){var D=this.source;var O=D.string.charCodeAt(this.pos+D.start);if(R!=null){M=R(O)}else{M=true}}else{M=false}if(!M){break}this.pos++}while(true){var W=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var F;if(this.pos<this.max){var P=this.source;var q=P.string.charCodeAt(this.pos+P.start);if(W!=null){F=W(q)}else{F=true}}else{F=false}if(F){this.upto(E.ofString("\n"))}else{break}var j=v.WHITE;while(true){var L;if(this.pos<this.max){var U=this.source;var B=U.string.charCodeAt(this.pos+U.start);if(j!=null){L=j(B)}else{L=true}}else{L=false}if(!L){break}this.pos++}}var G=this.ident();if(!x.isSuccess(G)){return C.Failure(G.slice(2)[0])}var $={kind:"NamedType",name:this.mkNameNode(x.sure(G).toString())};t.values.push($);var K=v.WHITE;while(true){var Y;if(this.pos<this.max){var J=this.source;var Q=J.string.charCodeAt(this.pos+J.start);if(K!=null){Y=K(Q)}else{Y=true}}else{Y=false}if(!Y){break}this.pos++}while(true){var z=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var V;if(this.pos<this.max){var X=this.source;var Z=X.string.charCodeAt(this.pos+X.start);if(z!=null){V=z(Z)}else{V=true}}else{V=false}if(V){this.upto(E.ofString("\n"))}else{break}var ee=v.WHITE;while(true){var te;if(this.pos<this.max){var re=this.source;var ie=re.string.charCodeAt(this.pos+re.start);if(ee!=null){te=ee(ie)}else{te=true}}else{te=false}if(!te){break}this.pos++}}if(this.allow(E.ofString("}"))){break}}t.loc.end=this.pos;var se=v.WHITE;while(true){var ne;if(this.pos<this.max){var ae=this.source;var ue=ae.string.charCodeAt(this.pos+ae.start);if(se!=null){ne=se(ue)}else{ne=true}}else{ne=false}if(!ne){break}this.pos++}while(true){var oe=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var le;if(this.pos<this.max){var he=this.source;var fe=he.string.charCodeAt(this.pos+he.start);if(oe!=null){le=oe(fe)}else{le=true}}else{le=false}if(le){this.upto(E.ofString("\n"))}else{break}var ce=v.WHITE;while(true){var pe;if(this.pos<this.max){var _e=this.source;var ve=_e.string.charCodeAt(this.pos+_e.start);if(ce!=null){pe=ce(ve)}else{pe=true}}else{pe=false}if(!pe){break}this.pos++}}return C.Success(t)},readScalarDefinition:function(e){var t={loc:{start:e,end:this.pos,source:this._filename,startToken:null,endToken:null},kind:"ScalarTypeDefinition",name:null};var r=v.WHITE;while(true){var i;if(this.pos<this.max){var s=this.source;var n=s.string.charCodeAt(this.pos+s.start);if(r!=null){i=r(n)}else{i=true}}else{i=false}if(!i){break}this.pos++}while(true){var a=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var u;if(this.pos<this.max){var o=this.source;var l=o.string.charCodeAt(this.pos+o.start);if(a!=null){u=a(l)}else{u=true}}else{u=false}if(u){this.upto(E.ofString("\n"))}else{break}var h=v.WHITE;while(true){var f;if(this.pos<this.max){var c=this.source;var p=c.string.charCodeAt(this.pos+c.start);if(h!=null){f=h(p)}else{f=true}}else{f=false}if(!f){break}this.pos++}}var _=x.sure(this.ident()).toString();t.name=this.mkNameNode(_);t.loc.end=this.pos;var g=v.WHITE;while(true){var m;if(this.pos<this.max){var w=this.source;var y=w.string.charCodeAt(this.pos+w.start);if(g!=null){m=g(y)}else{m=true}}else{m=false}if(!m){break}this.pos++}while(true){var k=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var S;if(this.pos<this.max){var T=this.source;var b=T.string.charCodeAt(this.pos+T.start);if(k!=null){S=k(b)}else{S=true}}else{S=false}if(S){this.upto(E.ofString("\n"))}else{break}var A=v.WHITE;while(true){var N;if(this.pos<this.max){var I=this.source;var H=I.string.charCodeAt(this.pos+I.start);if(A!=null){N=A(H)}else{N=true}}else{N=false}if(!N){break}this.pos++}}return C.Success(t)},readUnionDefinition:function(e){var t={loc:{start:e,end:this.pos,source:this._filename,startToken:null,endToken:null},kind:"UnionTypeDefinition",name:null,types:[]};var r=v.WHITE;while(true){var i;if(this.pos<this.max){var s=this.source;var n=s.string.charCodeAt(this.pos+s.start);if(r!=null){i=r(n)}else{i=true}}else{i=false}if(!i){break}this.pos++}while(true){var a=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var u;if(this.pos<this.max){var o=this.source;var l=o.string.charCodeAt(this.pos+o.start);if(a!=null){u=a(l)}else{u=true}}else{u=false}if(u){this.upto(E.ofString("\n"))}else{break}var h=v.WHITE;while(true){var f;if(this.pos<this.max){var c=this.source;var p=c.string.charCodeAt(this.pos+c.start);if(h!=null){f=h(p)}else{f=true}}else{f=false}if(!f){break}this.pos++}}var _=x.sure(this.ident()).toString();t.name=this.mkNameNode(_);var g=v.WHITE;while(true){var m;if(this.pos<this.max){var w=this.source;var y=w.string.charCodeAt(this.pos+w.start);if(g!=null){m=g(y)}else{m=true}}else{m=false}if(!m){break}this.pos++}while(true){var k=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var S;if(this.pos<this.max){var T=this.source;var b=T.string.charCodeAt(this.pos+T.start);if(k!=null){S=k(b)}else{S=true}}else{S=false}if(S){this.upto(E.ofString("\n"))}else{break}var A=v.WHITE;while(true){var N;if(this.pos<this.max){var I=this.source;var H=I.string.charCodeAt(this.pos+I.start);if(A!=null){N=A(H)}else{N=true}}else{N=false}if(!N){break}this.pos++}}this.expect(E.ofString("="));while(true){var R=v.WHITE;while(true){var M;if(this.pos<this.max){var D=this.source;var O=D.string.charCodeAt(this.pos+D.start);if(R!=null){M=R(O)}else{M=true}}else{M=false}if(!M){break}this.pos++}while(true){var W=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var F;if(this.pos<this.max){var P=this.source;var q=P.string.charCodeAt(this.pos+P.start);if(W!=null){F=W(q)}else{F=true}}else{F=false}if(F){this.upto(E.ofString("\n"))}else{break}var j=v.WHITE;while(true){var L;if(this.pos<this.max){var U=this.source;var B=U.string.charCodeAt(this.pos+U.start);if(j!=null){L=j(B)}else{L=true}}else{L=false}if(!L){break}this.pos++}}var G=this.ident();if(!x.isSuccess(G)){return C.Failure(G.slice(2)[0])}var $={kind:"NamedType",name:this.mkNameNode(x.sure(G).toString())};t.types.push($);if(!this.allow(E.ofString("|"))){break}}t.loc.end=this.pos;var K=v.WHITE;while(true){var Y;if(this.pos<this.max){var J=this.source;var Q=J.string.charCodeAt(this.pos+J.start);if(K!=null){Y=K(Q)}else{Y=true}}else{Y=false}if(!Y){break}this.pos++}while(true){var z=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var V;if(this.pos<this.max){var X=this.source;var Z=X.string.charCodeAt(this.pos+X.start);if(z!=null){V=z(Z)}else{V=true}}else{V=false}if(V){this.upto(E.ofString("\n"))}else{break}var ee=v.WHITE;while(true){var te;if(this.pos<this.max){var re=this.source;var ie=re.string.charCodeAt(this.pos+re.start);if(ee!=null){te=ee(ie)}else{te=true}}else{te=false}if(!te){break}this.pos++}}return C.Success(t)},readFieldDefinition:function(){var e=v.WHITE;while(true){var t;if(this.pos<this.max){var r=this.source;var i=r.string.charCodeAt(this.pos+r.start);if(e!=null){t=e(i)}else{t=true}}else{t=false}if(!t){break}this.pos++}while(true){var s=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var n;if(this.pos<this.max){var a=this.source;var u=a.string.charCodeAt(this.pos+a.start);if(s!=null){n=s(u)}else{n=true}}else{n=false}if(n){this.upto(E.ofString("\n"))}else{break}var o=v.WHITE;while(true){var l;if(this.pos<this.max){var h=this.source;var f=h.string.charCodeAt(this.pos+h.start);if(o!=null){l=o(f)}else{l=true}}else{l=false}if(!l){break}this.pos++}}var c={loc:{start:this.pos,end:this.pos,source:this._filename,startToken:null,endToken:null},kind:"ObjectTypeDefinition",name:null,type:null,arguments:[],directives:[]};var p=false;var _=false;var g=false;var m=x.sure(this.ident()).toString();c.name=this.mkNameNode(m);this.expect(E.ofString(":"));if(this.allow(E.ofString("["))){p=true}var w=v.WHITE;while(true){var y;if(this.pos<this.max){var k=this.source;var S=k.string.charCodeAt(this.pos+k.start);if(w!=null){y=w(S)}else{y=true}}else{y=false}if(!y){break}this.pos++}var T=this.ident();if(!x.isSuccess(T)){return C.Failure(T.slice(2)[0])}var b={kind:"NamedType",name:this.mkNameNode(x.sure(T).toString())};var A=v.WHITE;while(true){var N;if(this.pos<this.max){var I=this.source;var H=I.string.charCodeAt(this.pos+I.start);if(A!=null){N=A(H)}else{N=true}}else{N=false}if(!N){break}this.pos++}if(p){if(this.allow(E.ofString("!"))){_=true}var R=v.WHITE;while(true){var M;if(this.pos<this.max){var D=this.source;var O=D.string.charCodeAt(this.pos+D.start);if(R!=null){M=R(O)}else{M=true}}else{M=false}if(!M){break}this.pos++}this.expect(E.ofString("]"))}var W=v.WHITE;while(true){var F;if(this.pos<this.max){var P=this.source;var q=P.string.charCodeAt(this.pos+P.start);if(W!=null){F=W(q)}else{F=true}}else{F=false}if(!F){break}this.pos++}if(this.allow(E.ofString("!"))){g=true}var j=c;if(g){j.type={type:null,kind:"NonNullType"};j=j.type}if(p){j.type={type:null,kind:"ListType"};j=j.type}if(_){j.type={type:null,kind:"NonNullType"};j=j.type}j.type=b;c.loc.end=this.pos;var L=v.WHITE;while(true){var U;if(this.pos<this.max){var B=this.source;var G=B.string.charCodeAt(this.pos+B.start);if(L!=null){U=L(G)}else{U=true}}else{U=false}if(!U){break}this.pos++}while(true){var $=function(e){return function(t){return t==e[0]}}([d.COMMENT_CHAR]);var K;if(this.pos<this.max){var Y=this.source;var J=Y.string.charCodeAt(this.pos+Y.start);if($!=null){K=$(J)}else{K=true}}else{K=false}if(K){this.upto(E.ofString("\n"))}else{break}var Q=v.WHITE;while(true){var z;if(this.pos<this.max){var V=this.source;var X=V.string.charCodeAt(this.pos+V.start);if(Q!=null){z=Q(X)}else{z=true}}else{z=false}if(!z){break}this.pos++}}return C.Success(c)},ident:function(e){if(e==null){e=false}var t;var r;if(e){var i=d.IDENT_START;if(this.pos<this.max){var s=this.source;var n=s.string.charCodeAt(this.pos+s.start);if(i!=null){r=i(n)}else{r=true}}else{r=false}}else{r=false}if(!r){if(!e){var a=d.IDENT_START;this.skipIgnored();if(this.pos<this.max){var u=this.source;var o=u.string.charCodeAt(this.pos+u.start);if(a!=null){t=a(o)}else{t=true}}else{t=false}}else{t=false}}else{t=true}if(t){var l=d.IDENT_CONTD;this.skipIgnored();var h=this.pos;while(true){var f;if(this.pos<this.max){var c=this.source;var p=c.string.charCodeAt(this.pos+c.start);if(l!=null){f=l(p)}else{f=true}}else{f=false}if(!f){break}this.pos++}var _=this.source;var v;var g;v=h;g=this.pos;return C.Success(E._new(_.string,E.wrap(_,v)+_.start,E.clamp(_,g)+_.start))}else{var m=this.pos;return C.Failure(this.makeError("Identifier expected",this.doMakePos(m,m+1)))}},doSkipIgnored:function(){var e=v.WHITE;while(true){var t;if(this.pos<this.max){var r=this.source;var i=r.string.charCodeAt(this.pos+r.start);if(e!=null){t=e(i)}else{t=true}}else{t=false}if(!t){break}this.pos++}},doMakePos:function(e,t){return new c("Untitled",e,t)},makeError:function(e,t){return new p(e,t)},__class__:d});var g={__ename__:true,__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]};g.CFunction=["CFunction",0];g.CFunction.toString=r;g.CFunction.__enum__=g;g.Module=function(e){var t=["Module",1,e];t.__enum__=g;t.toString=r;return t};g.FilePos=function(e,t,i){var s=["FilePos",2,e,t,i];s.__enum__=g;s.toString=r;return s};g.Method=function(e,t){var i=["Method",3,e,t];i.__enum__=g;i.toString=r;return i};g.LocalFunction=function(e){var t=["LocalFunction",4,e];t.__enum__=g;t.toString=r;return t};var m=function(){};m.__name__=true;var w={__ename__:true,__constructs__:["Left","Right"]};w.Left=function(e){var t=["Left",0,e];t.__enum__=w;t.toString=r;return t};w.Right=function(e){var t=["Right",1,e];t.__enum__=w;t.toString=r;return t};var y=function(){this.h={}};y.__name__=true;y.__interfaces__=[m];y.prototype={setReserved:function(e,t){if(this.rh==null){this.rh={}}this.rh["$"+e]=t},getReserved:function(e){if(this.rh==null){return null}else{return this.rh["$"+e]}},existsReserved:function(e){if(this.rh==null){return false}return this.rh.hasOwnProperty("$"+e)},keys:function(){return a.iter(this.arrayKeys())},arrayKeys:function(){var e=[];for(var t in this.h){if(this.h.hasOwnProperty(t)){e.push(t)}}if(this.rh!=null){for(var t in this.rh){if(t.charCodeAt(0)==36){e.push(t.substr(1))}}}return e},__class__:y};var k=function(e){Error.call(this);this.val=e;this.message=String(e);if(Error.captureStackTrace){Error.captureStackTrace(this,k)}};k.__name__=true;k.wrap=function(e){if(e instanceof Error){return e}else{return new k(e)}};k.__super__=Error;k.prototype=i(Error.prototype,{__class__:k});var S=function(){};S.__name__=true;S.getClass=function(e){if(e instanceof Array&&e.__enum__==null){return Array}else{var t=e.__class__;if(t!=null){return t}var r=S.__nativeClassName(e);if(r!=null){return S.__resolveNativeClass(r)}return null}};S.__string_rec=function(e,t){if(e==null){return"null"}if(t.length>=5){return"<...>"}var r=typeof e;if(r=="function"&&(e.__name__||e.__ename__)){r="object"}switch(r){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2){return e[0]}var i=e[0]+"(";t+="	";var s=2;var n=e.length;while(s<n){var a=s++;if(a!=2){i+=","+S.__string_rec(e[a],t)}else{i+=S.__string_rec(e[a],t)}}return i+")"}var u=e.length;var o;var l="[";t+="	";var h=0;var f=u;while(h<f){var c=h++;l+=(c>0?",":"")+S.__string_rec(e[c],t)}l+="]";return l}var p;try{p=e.toString}catch(_){return"???"}if(p!=null&&p!=Object.toString&&typeof p=="function"){var v=e.toString();if(v!="[object Object]"){return v}}var d=null;var g="{\n";t+="	";var m=e.hasOwnProperty!=null;for(var d in e){if(m&&!e.hasOwnProperty(d)){continue}if(d=="prototype"||d=="__class__"||d=="__super__"||d=="__interfaces__"||d=="__properties__"){continue}if(g.length!=2){g+=", \n"}g+=t+d+" : "+S.__string_rec(e[d],t)}t=t.substring(1);g+="\n"+t+"}";return g;case"string":return e;default:return String(e)}};S.__interfLoop=function(e,t){if(e==null){return false}if(e==t){return true}var r=e.__interfaces__;if(r!=null){var i=0;var s=r.length;while(i<s){var n=i++;var a=r[n];if(a==t||S.__interfLoop(a,t)){return true}}}return S.__interfLoop(e.__super__,t)};S.__instanceof=function(e,t){if(t==null){return false}switch(t){case Array:if(e instanceof Array){return e.__enum__==null}else{return false}break;case H:return typeof e=="boolean";case N:return true;case I:return typeof e=="number";case A:if(typeof e=="number"){return(e|0)===e}else{return false}break;case String:return typeof e=="string";default:if(e!=null){if(typeof t=="function"){if(e instanceof t){return true}if(S.__interfLoop(S.getClass(e),t)){
return true}}else if(typeof t=="object"&&S.__isNativeObj(t)){if(e instanceof t){return true}}}else{return false}if(t==R?e.__name__!=null:false){return true}if(t==M?e.__ename__!=null:false){return true}return e.__enum__==t}};S.__nativeClassName=function(e){var t=S.__toStr.call(e).slice(8,-1);if(t=="Object"||t=="Function"||t=="Math"||t=="JSON"){return null}return t};S.__isNativeObj=function(e){return S.__nativeClassName(e)!=null};S.__resolveNativeClass=function(e){return t[e]};var T=function(e,t,r){if(e==null){e=500}this.isTinkError=true;this.code=e;this.message=t;this.pos=r;this.exceptionStack=[];this.callStack=[]};T.__name__=true;T.asError=function(e){if(e!=null&&e.isTinkError){return e}else{return null}};T.prototype={printPos:function(){return this.pos.className+"."+this.pos.methodName+":"+this.pos.lineNumber},toString:function(){var e="Error#"+this.code+": "+this.message;if(this.pos!=null){e+=" @ "+this.printPos()}return e},throwSelf:function(){throw new k(this)},__class__:T};var C={__ename__:true,__constructs__:["Success","Failure"]};C.Success=function(e){var t=["Success",0,e];t.__enum__=C;t.toString=r;return t};C.Failure=function(e){var t=["Failure",1,e];t.__enum__=C;t.toString=r;return t};var x=function(){};x.__name__=true;x.sure=function(e){switch(e[1]){case 0:var t=e[2];return t;case 1:var r=e[2];var i=T.asError(r);if(i==null){throw new k(r)}else{var s=i;return s.throwSelf()}break}};x.isSuccess=function(e){if(e[1]==0){return true}else{return false}};var b=function(e,t,r){this.string=e;this.start=t;this.end=r;if((this.length=r-t)<0){this.length=0;this.end=this.start}};b.__name__=true;b.prototype={toString:function(){if(this.representation==null){this.representation=this.string.substring(this.start,this.end)}return this.representation},__class__:b};var E={};E.__name__=true;E._new=function(e,t,r){var i=new b(e,t==e.length?t:t<0?t%e.length+e.length:t%e.length,r==e.length?r:r<0?r%e.length+e.length:r%e.length);return i};E.clamp=function(e,t){if(t<0){if(-t>e.length){return 0}else{return t+e.length}}else if(t>e.length){return e.length}else{return t}};E.wrap=function(e,t){if(e.length==0){return 0}else if(t<0){return t%e.length+e.length}else{return t%e.length}};E.ofString=function(e){if(e==null||e==""){return E.EMPTY}else if(e.length==1){var t=e.charCodeAt(0);var r=t;if(r<E.CHARS.length){return E.CHARS[r]}else{return new b(e,0,e.length)}}else{return new b(e,0,e.length)}};E.hasSub=function(e,t,r){if(r==null){r=0}r=E.wrap(e,r);if(r+t.length>e.length){return false}var i=e;var s=t;return E.isEqual(i.string,i.start+r,t.length,s.string,s.start,s.length)};E.indexOf=function(e,t,r){if(r==null){r=0}r=E.wrap(e,r);var i=e.string.indexOf(t.toString(),r+e.start);if(i==-1){return-1}else{var s=i;return s-e.start}};E.isEqual=function(e,t,r,i,s,n){if(n!=r){return false}var a=0;var u=n;while(a<u){var o=a++;if(e.charCodeAt(t+o)!=i.charCodeAt(s+o)){return false}}return true};E.equalsString=function(e,t){if(t==null||t.length!=e.length){return false}else{return E.isEqual(e.string,e.start,e.length,t,0,t.length)}};String.prototype.__class__=String;String.__name__=true;Array.__name__=true;var A={__name__:["Int"]};var N={__name__:["Dynamic"]};var I=Number;I.__name__=["Float"];var H=Boolean;H.__ename__=["Bool"];var R={__name__:["Class"]};var M={};var D={};v.WHITE=function(e){return e<33};v.LOWER=function(e){if(e>=97){return e<=122}else{return false}};v.UPPER=function(e){if(e>=65){return e<=90}else{return false}};v.DIGIT=function(e){if(e>=48){return e<=57}else{return false}};d.COMMENT_CHAR=35;d.IDENT_START=function(e){var t;var r=v.UPPER;var i=v.LOWER;var s=function(e){if(!(r==null||r(e))){if(i!=null){return i(e)}else{return true}}else{return true}};var n=function(e){return e==95};t=function(e){if(!(s==null||s(e))){if(n!=null){return n(e)}else{return true}}else{return true}};return t}(this);d.IDENT_CONTD=function(e){var t;var r=d.IDENT_START;var i=v.DIGIT;t=function(e){if(!(r==null||r(e))){if(i!=null){return i(e)}else{return true}}else{return true}};return t}(this);S.__toStr={}.toString;E.CHARS=function(e){var t;var r=[];{var i=0;while(i<128){var s=i++;r.push(new b(String.fromCharCode(s),0,1))}}t=r;return t}(this);E.EMPTY=new b("",0,0);n.main()})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);
